{"id":"bd-101","title":"Audio: fix glitching in getNextAudioBlock","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-20T12:58:29.423942Z","created_by":"billt","updated_at":"2026-02-20T13:08:09.104982Z","closed_at":"2026-02-20T13:08:09.104970Z","close_reason":"Successfully implemented and verified with build. Fixed audio glitches, RTL layout, and FX crossfading.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-11j","title":"Riffs: fix layer stacking visibility","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T12:58:27.403133Z","created_by":"billt","updated_at":"2026-02-20T13:08:09.103806Z","closed_at":"2026-02-20T13:08:09.103790Z","close_reason":"Successfully implemented and verified with build. Fixed audio glitches, RTL layout, and FX crossfading.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-13h","title":"V9 Engine: Standalone FXEngine and Selective Processing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T08:01:32.538359Z","created_by":"billt","updated_at":"2026-02-21T13:54:39.908297Z","closed_at":"2026-02-21T13:54:39.908285Z","close_reason":"Initial V9 implementation finished, moving to V9.1 maintenance and bug fixes.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":41,"issue_id":"bd-13h","author":"Bill Tribble","text":"### Detailed Context\nImplement StandaloneFXEngine with clean Delay and Reverb.\nImplement 'Selective Summing' logic in getNextAudioBlock:\n- Sum selected layers into a scratch buffer.\n- Process scratch buffer through FXEngine.\n- Sum result with the 'dry' sum of non-selected layers.\n- On click-up of XY pad, trigger destructive merge: delete selected source layers and add the FX-ed result to the riff.","created_at":"2026-02-21T08:01:56Z"},{"id":44,"issue_id":"bd-13h","author":"Bill Tribble","text":"### Detailed Context\nImplement StandaloneFXEngine with clean Delay and Reverb.\nImplement 'Selective Summing' logic in getNextAudioBlock:\n- Sum selected layers into a scratch buffer.\n- Process scratch buffer through FXEngine.\n- Sum result with the 'dry' sum of non-selected layers.\n- On click-up of XY pad, trigger destructive merge: delete selected source layers and add the FX-ed result to the riff.","created_at":"2026-02-21T08:02:08Z"}]}
{"id":"bd-142","title":"Phase 2: Retrospective Buffer + Waveform Display","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-19T07:44:06.578749Z","created_by":"billt","updated_at":"2026-02-19T08:37:54.449682Z","closed_at":"2026-02-19T08:37:54.449667Z","close_reason":"All dependencies closed.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-142","depends_on_id":"bd-27a","type":"blocks","created_at":"2026-02-19T07:44:19.183939Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-142","depends_on_id":"bd-2ti","type":"blocks","created_at":"2026-02-19T07:44:37.047286Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-142","depends_on_id":"bd-3pn","type":"blocks","created_at":"2026-02-19T07:44:37.068921Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-15i","title":"Audio: Gapless transition when switching riff states","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T14:25:14.664310Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.396199Z","closed_at":"2026-02-20T14:43:17.396176Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":28,"issue_id":"bd-15i","author":"Bill Tribble","text":"### Seamless State Switching\nModify the RiffPlaybackEngine audio thread logic:\n1. When a new riff is triggered, check if its loop length and content match the currently playing riff's core loop.\n2. If it's a 'sibling' (same loop, different layers), update the playing Riff pointer to the new entry without resetting 'currentPosition'.\n3. This ensures gapless, pop-free transitions when selecting a new state or adding a layer.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-15j","title":"Retrospective Interaction: Click-to-Loop Logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","updated_at":"2026-02-19T08:23:35.053416Z","closed_at":"2026-02-19T08:23:35.053402Z","close_reason":"Implemented click detection for 4-section layout, callback triggering (mocked with logging), and visual flash feedback.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-15j","depends_on_id":"bd-26v","type":"blocks","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-15j","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":5,"issue_id":"bd-15j","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- Add juce::MouseListener or override mouseDown in the retrospective panel components.\n- **Hit Testing:** Determine which of the 4 sections was clicked.\n- **Action:**\n  - Click on 1-Bar section -> Trigger SET_LOOP_LENGTH(1) -> Commits 1 bar from buffer to slot.\n  - Click on 2-Bar section -> Trigger SET_LOOP_LENGTH(2) -> Commits 2 bars.\n  - ...and so on for 4 and 8.\n- **Visual Feedback:** \n  - Momentary flash or highlight on the clicked section.\n  - Mocking: If the Engine isn't fully ready to accept SET_LOOP_LENGTH, just log the intent to console.","created_at":"2026-02-19T08:18:10Z"}]}
{"id":"bd-15s","title":"V9 Logging: Audit Logging for Actions and Audio Flow","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T08:01:32.713432Z","created_by":"billt","updated_at":"2026-02-21T13:54:39.905565Z","closed_at":"2026-02-21T13:54:39.905547Z","close_reason":"Initial V9 implementation finished, moving to V9.1 maintenance and bug fixes.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":43,"issue_id":"bd-15s","author":"Bill Tribble","text":"### Detailed Context\nFlowZoneLogger:\n- LOG_ACTION: All tabs, buttons, knobs, sliders.\n- LOG_AUDIO: Peak levels (periodic), clipping events, and startup initialization flow.\nLog to ~/FlowZone_Log.txt.","created_at":"2026-02-21T08:01:57Z"},{"id":46,"issue_id":"bd-15s","author":"Bill Tribble","text":"### Detailed Context\nFlowZoneLogger:\n- LOG_ACTION: All tabs, buttons, knobs, sliders.\n- LOG_AUDIO: Peak levels (periodic), clipping events, and startup initialization flow.\nLog to ~/FlowZone_Log.txt.","created_at":"2026-02-21T08:02:08Z"},{"id":48,"issue_id":"bd-15s","author":"Bill Tribble","text":"### Detailed Context\nFlowZoneLogger:\n- LOG_ACTION: All tabs, buttons, knobs, sliders.\n- LOG_AUDIO: Peak levels (periodic), clipping events, and startup initialization flow.\nLog to ~/FlowZone_Log.txt.","created_at":"2026-02-21T08:02:20Z"},{"id":49,"issue_id":"bd-15s","author":"Bill Tribble","text":"### Detailed Context\nFlowZoneLogger:\n- LOG_ACTION: All tabs, buttons, knobs, sliders.\n- LOG_AUDIO: Peak levels (periodic), clipping events, and startup initialization flow.\nLog to ~/FlowZone_Log.txt.","created_at":"2026-02-21T08:02:31Z"}]}
{"id":"bd-160","title":"Audio: set default buffer size to 32","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:05:52.234072Z","created_by":"billt","updated_at":"2026-02-20T13:50:12.431758Z","closed_at":"2026-02-20T13:50:12.431742Z","close_reason":"Already implemented settings and buffer 32 control, now fixing regressions related to it.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-19v","title":"Add Keyboard Controls for Buffer Taps","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:51.510111Z","created_by":"billt","updated_at":"2026-02-22T08:54:15.010066Z","closed_at":"2026-02-22T08:54:15.010034Z","close_reason":"Duplicate","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1ap","title":"Improve riff capture logic with timeout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T11:04:33.999762Z","created_by":"billt","updated_at":"2026-02-20T11:06:22.189589Z","closed_at":"2026-02-20T11:06:22.189569Z","close_reason":"Implemented riff capture timeout and verified FX routing","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":23,"issue_id":"bd-1ap","author":"Bill Tribble","text":"### Detailed Context\nCurrently, captures of the same bar length are always merged until 8 layers are reached. This can make the history feel 'stuck'. We will add a time-based check (e.g. 5 seconds) to decide whether to merge or start a new riff entry.","created_at":"2026-02-20T11:04:47Z"}]}
{"id":"bd-1cb","title":"Feature: FX Performance Bounce (Layer Consolidation)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T15:14:53.434329Z","created_by":"billt","updated_at":"2026-02-21T15:17:43.918224Z","closed_at":"2026-02-21T15:17:43.918212Z","close_reason":"Implemented phase-locked alignment, centered stereo monitoring with reverb, and consolidated FX bounce workflow.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":61,"issue_id":"bd-1cb","author":"Bill Tribble","text":"### Detailed Context\nWhen capturing in FX mode, the engine will flatten ONLY the selected contributors into a single wet track and delete the original dry layers from the mix. Unselected layers remain dry and untouched. This provides a clean 'Bounce' workflow for complex multi-layer designs.","created_at":"2026-02-21T15:15:04Z"}]}
{"id":"bd-1cy","title":"V2 Prototype: Mic Input with Gain, Level Meter & Monitor","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-19T07:39:33.081766Z","created_by":"billt","updated_at":"2026-02-19T07:40:28.634117Z","closed_at":"2026-02-19T07:40:28.634105Z","close_reason":"Verified by user in build","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1cy","depends_on_id":"bd-27m","type":"blocks","created_at":"2026-02-19T07:40:16.441475Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-1ds","title":"V9.3: Fix UI Ghosting in TopContentPanel","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T14:33:11.014180Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.896508Z","closed_at":"2026-02-21T14:39:06.896490Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1eo","title":"Implement Main.cpp — JUCE standalone app entry point","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.125650Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366055Z","closed_at":"2026-02-19T07:40:16.366042Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1fv","title":"Differentiate stacked riff layers visually","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-19T22:54:49.224095Z","created_by":"billt","updated_at":"2026-02-20T07:22:19.063035Z","closed_at":"2026-02-20T07:22:19.063014Z","close_reason":"Implemented layered rendering with zebra shading in RiffHistoryPanel. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1fv","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:55:09.861841Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":16,"issue_id":"bd-1fv","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'visual fix: when i add a layer to a riff, show it as a new layer.. the riff gets denser with layers each time one is added. they stack vertically.. make each layer 30% brighter or darker, alternate zebra style to differentiate.'\n\n**Actionable Steps:**\n1. Update the Riff UI component to visibly draw multiple layers vertically stacked.\n2. Apply an alternating shading function (e.g. alternating 30% luminosity) so each stacked layer is easily visually distinct.","created_at":"2026-02-19T22:57:56Z"}]}
{"id":"bd-1hr","title":"Implement LevelMeter component — real-time VU meter with peak hold","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.146379Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366465Z","closed_at":"2026-02-19T07:40:16.366453Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1j9","title":"Horizontally draggable Riff History","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-22T17:39:38.496563Z","created_by":"billt","updated_at":"2026-02-22T17:47:52.168949Z","closed_at":"2026-02-22T17:47:52.168906Z","close_reason":"Implemented horizontal dragging for Riff History panel using mouse events.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1l3","title":"Riffs: Fix layer stacking visibility (ensure multiple layers show)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:13:25.255254Z","created_by":"billt","updated_at":"2026-02-20T13:17:33.767505Z","closed_at":"2026-02-20T13:17:33.767492Z","close_reason":"Successfully fixed Riff playback audio glitches (removed double-processing), fixed Riff UI visibility (changed Layer 1 color), and refined RTL pinning logic. Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1lz","title":"Update MainComponent to use SandwichFramework","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:42:31.371052Z","created_by":"billt","updated_at":"2026-02-21T14:45:23.823362Z","closed_at":"2026-02-21T14:45:23.823350Z","close_reason":"Completed architectural refactor to Sandwich Framework","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1mx","title":"Audio: Fix FX glitch (stereo advancement error)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T14:52:14.820703Z","created_by":"billt","updated_at":"2026-02-20T15:03:00.387625Z","closed_at":"2026-02-20T15:03:00.387604Z","close_reason":"Completed and verified v7 polish.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":34,"issue_id":"bd-1mx","author":"Bill Tribble","text":"### FX Stereo Advancement Fix\nIn MainComponent::getNextAudioBlock, the fxLevelSelector.getNextValue() is currently called INSIDE the channel loop. This causes the gain level to advance twice for every output frame (once for Left, once for Right), leading to a 50% timing offset between channels and 'weird' glitchy audio.\n\n**Fix**: Extract the mix value outside the channel loop (or call it once per stereo frame) to keep the crossfade identical and phase-accurate across the stereo field.","created_at":"2026-02-20T14:56:47Z"}]}
{"id":"bd-1ne","title":"XYPad: reduce latency and improve responsiveness","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:58:30.443074Z","created_by":"billt","updated_at":"2026-02-20T13:08:09.105325Z","closed_at":"2026-02-20T13:08:09.105314Z","close_reason":"Successfully implemented and verified with build. Fixed audio glitches, RTL layout, and FX crossfading.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1o5","title":"Logging: Add file logging for troubleshooting","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-20T16:12:55.911411Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.038798Z","closed_at":"2026-02-20T19:11:46.038788Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":39,"issue_id":"bd-1o5","author":"Bill Tribble","text":"Enabling FileLogger in MainComponent to trace FX state and buffer levels.","created_at":"2026-02-20T16:13:15Z"}]}
{"id":"bd-1ok","title":"UI: Move Gain/BPM labels closer to dials","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T14:52:14.852451Z","created_by":"billt","updated_at":"2026-02-20T15:03:00.388503Z","closed_at":"2026-02-20T15:03:00.388488Z","close_reason":"Completed and verified v7 polish.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":35,"issue_id":"bd-1ok","author":"Bill Tribble","text":"### LabeledKnob Component\nCreate a new reusable LabeledKnob class in LabeledKnob.h. \n- **Structure**: Inherit from juce::Component. Contains one juce::Slider and two juce::Label objects.\n- **Goal**: Tight coupling of Name, Dial, and Value. \n- **Aesthetic**: Labels should be centered, with the Title at top and Value at bottom.\n- **Integration**: Refactor MiddleMenuPanel to use LabeledKnob gainKnob and LabeledKnob bpmKnob instead of loose pointers.","created_at":"2026-02-20T14:56:47Z"}]}
{"id":"bd-1pe","title":"Audio: Fix Riff playback glitches (double-processing)","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-20T13:13:23.139844Z","created_by":"billt","updated_at":"2026-02-20T13:17:33.766550Z","closed_at":"2026-02-20T13:17:33.766534Z","close_reason":"Successfully fixed Riff playback audio glitches (removed double-processing), fixed Riff UI visibility (changed Layer 1 color), and refined RTL pinning logic. Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1r2","title":"UI: add standard JUCE audio/MIDI settings","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-20T12:58:31.448750Z","created_by":"billt","updated_at":"2026-02-20T13:08:09.105818Z","closed_at":"2026-02-20T13:08:09.105806Z","close_reason":"Successfully implemented and verified with build. Fixed audio glitches, RTL layout, and FX crossfading.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1r7","title":"Routing: Decouple riff playback from record buffer (Normal mode)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T16:12:55.719168Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.035385Z","closed_at":"2026-02-20T19:11:46.035364Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":38,"issue_id":"bd-1r7","author":"Bill Tribble","text":"Updating MainComponent audio routing to only record riffs into buffer when FX is active.","created_at":"2026-02-20T16:13:15Z"}]}
{"id":"bd-1rb","title":"Build out 24 working FX DSP implementations","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.728662Z","created_by":"billt","updated_at":"2026-02-22T08:05:37.898426Z","closed_at":"2026-02-22T08:05:37.898411Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":67,"issue_id":"bd-1rb","author":"Bill Tribble","text":"### Detailed Context\nBuild out working DSP implementations for all 24 V1 effects (e.g., Lowpass, Reverb, Delay, Bitcrusher, Compressor) routing through InternalFX. Make them fully functional according to the V1 audio engine specifications.","created_at":"2026-02-22T07:57:54Z"}]}
{"id":"bd-1s4","title":"Fix loop wrapping and truncation bug","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T16:35:04.721754Z","created_by":"billt","updated_at":"2026-02-22T16:36:50.959046Z","closed_at":"2026-02-22T16:36:50.959029Z","close_reason":"Implemented modulo math per-layer in RiffPlaybackEngine and verified Riff composite functions. Modulo based on actual layer sample lengths.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":80,"issue_id":"bd-1s4","author":"Bill Tribble","text":"### Detailed Context\nIssue: Shorter loops (e.g. 1 bar) truncated when added onto longer loops (e.g. 4 bar).\nSolution: Instead of computing a single posInt for all layers in RiffPlaybackEngine, compute wrap per layer based on its sample length. Also ensure Riff summing logic loops shorter layers.","created_at":"2026-02-22T16:35:26Z"}]}
{"id":"bd-1se","title":"V9 UI: Zigzag Layer Grid and Mode Grid Refresh","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T08:01:32.625977Z","created_by":"billt","updated_at":"2026-02-21T13:54:39.907756Z","closed_at":"2026-02-21T13:54:39.907733Z","close_reason":"Initial V9 implementation finished, moving to V9.1 maintenance and bug fixes.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":42,"issue_id":"bd-1se","author":"Bill Tribble","text":"### Detailed Context\nZigzagLayerGrid: 2 rows of 4 oblongs. Top row: 1, 3, 5, 7. Bottom row: 2, 4, 6, 8.\nVisually toggle selection when tapped.\nModeGrid: 2x4 grid in Instrument tab with icons for Drums, Notes, Bass, etc.\nPresetSelector: 3x4 grid in Sound tab for choosing effects or instrument presets.","created_at":"2026-02-21T08:01:56Z"},{"id":45,"issue_id":"bd-1se","author":"Bill Tribble","text":"### Detailed Context\nZigzagLayerGrid: 2 rows of 4 oblongs. Top row: 1, 3, 5, 7. Bottom row: 2, 4, 6, 8.\nVisually toggle selection when tapped.\nModeGrid: 2x4 grid in Instrument tab with icons for Drums, Notes, Bass, etc.\nPresetSelector: 3x4 grid in Sound tab for choosing effects or instrument presets.","created_at":"2026-02-21T08:02:08Z"},{"id":47,"issue_id":"bd-1se","author":"Bill Tribble","text":"### Detailed Context\nZigzagLayerGrid: 2 rows of 4 oblongs. Top row: 1, 3, 5, 7. Bottom row: 2, 4, 6, 8.\nVisually toggle selection when tapped.\nModeGrid: 2x4 grid in Instrument tab with icons for Drums, Notes, Bass, etc.\nPresetSelector: 3x4 grid in Sound tab for choosing effects or instrument presets.","created_at":"2026-02-21T08:02:20Z"}]}
{"id":"bd-1ss","title":"Refine FX Mode Layout & UI Defaults","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T13:54:40.024986Z","created_by":"billt","updated_at":"2026-02-21T13:58:59.478744Z","closed_at":"2026-02-21T13:58:59.478731Z","close_reason":"Audio fixes (speed/layering) and FX layout refinements completed and verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":53,"issue_id":"bd-1ss","author":"Bill Tribble","text":"### Context: FX Mode Layout\nThe user wants a specific layout for FX mode:\n- Top: FX Type Selection (Grid)\n- Middle: Tabs (Standard)\n- Bottom (shared): XY Pad and Zigzag Layer Grid\n- Default: All layer buttons should be toggled ON initially.","created_at":"2026-02-21T13:55:03Z"}]}
{"id":"bd-1ta","title":"Fix Riff UI overlap and sizing issues in History Panel","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-19T08:56:34.534119Z","created_by":"billt","updated_at":"2026-02-19T22:14:02.823869Z","closed_at":"2026-02-19T22:14:02.823854Z","close_reason":"Fixed UI overlaps with clipping, selection jumping with UUID tracking, and sizing issues with consistent border logic.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":11,"issue_id":"bd-1ta","author":"Bill Tribble","text":"Investigate RiffHistoryPanel::updateItems(). Ensure currentX correctly handles multiple items without overlap. User reports clips overlap in UI. Also check why user thinks size changes on click (bounds updates?). Ensure fixed width is respected.","created_at":"2026-02-19T08:56:48Z"}]}
{"id":"bd-1tg","title":"Fix Riff Layering & Queue Logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T13:54:39.986793Z","created_by":"billt","updated_at":"2026-02-21T13:58:59.478311Z","closed_at":"2026-02-21T13:58:59.478296Z","close_reason":"Audio fixes (speed/layering) and FX layout refinements completed and verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":52,"issue_id":"bd-1tg","author":"Bill Tribble","text":"### Context: Broken Riff Queue\nThe issue where only one riff plays at a time is caused by playingRiffs.clear() being called inside RiffPlaybackEngine::playRiff. This was intended as exclusive playback but breaks the desired layering/queuing behavior.\n**Fix**: Remove the clear() call and ensure position inheritance works for stacked riffs.","created_at":"2026-02-21T13:55:03Z"}]}
{"id":"bd-1ut","title":"Replace GoTo with Gate Trip","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:44.062948Z","created_by":"billt","updated_at":"2026-02-22T08:57:15.114883Z","closed_at":"2026-02-22T08:57:15.114865Z","close_reason":"Implemented Stutter Gate and replaced GoTo with Gate Trip","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1vu","title":"Main: Fix Settings buffer flicking by removing prepareToPlay enforcement","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:50:19.607674Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.553927Z","closed_at":"2026-02-20T14:39:23.553914Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1wy","title":"Implement exclusive Riff playback (one at a time)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T08:57:02.911674Z","created_by":"billt","updated_at":"2026-02-19T22:14:18.963018Z","closed_at":"2026-02-19T22:14:18.962949Z","close_reason":"Implemented exclusive riff playback by clearing the playing riffs list before starting a new one.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":12,"issue_id":"bd-1wy","author":"Bill Tribble","text":"RiffPlaybackEngine::playRiff currently adds to playingRiffs. Must clear existing riffs before playing new one to ensure single-playback exclusivity.","created_at":"2026-02-19T08:57:17Z"}]}
{"id":"bd-1xz","title":"Fix FX Routing, Consolidation, Loop Sync, and Mic Latency","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T18:23:01.409223Z","created_by":"billt","updated_at":"2026-02-21T18:27:16.110173Z","closed_at":"2026-02-21T18:27:16.110154Z","close_reason":"Fixed FX routing, WYSIWYG loop capture sync, selected layer state bug, and added Rev Bypass to UI.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":64,"issue_id":"bd-1xz","author":"Bill Tribble","text":"### Detailed Context\\n1. Revert aggressive PPQ capture extraction in MainComponent::onLoopTriggered to get WYSIWYG sync back.\\n2. Ensure FX mode routes selected layers to looperMixBuffer continuously for bouncing.\\n3. Add a bypass button for Mic Reverb.\\n4. Stop clearing selected layers when releasing XY pad.","created_at":"2026-02-21T18:23:09Z"}]}
{"id":"bd-1yp","title":"Audio: fix mic input to retrospective buffer when monitor is OFF","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:50:52.429711Z","created_by":"billt","updated_at":"2026-02-20T12:53:41.757850Z","closed_at":"2026-02-20T12:53:41.757837Z","close_reason":"Completed successfully. Verified with build.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1z5","title":"V9.3: Fix Monitor Button audio connection","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T14:33:11.115965Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.895579Z","closed_at":"2026-02-21T14:39:06.895567Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1zg","title":"Riff History Data Model & Commit Logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","updated_at":"2026-02-19T08:36:56.541148Z","closed_at":"2026-02-19T08:36:56.541132Z","close_reason":"Implemented Riff data model and capture logic. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1zg","depends_on_id":"bd-15j","type":"blocks","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-1zg","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":6,"issue_id":"bd-1zg","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Data Structure:**\n  - Define struct Riff { UUID id; String name; int layers; ... }.\n  - Add std::vector<Riff> riffHistory to SessionStateManager (or MainComponent for prototype).\n- **Commit Logic:**\n  - When a loop is captured/committed (via the retrospective click), create a new Riff entry.\n  - **Limit:** Keep the vector size reasonable (e.g., unlimited for now, or max 100).\n- **Persistence:** valid Riffs should theoretically be saved to disk, but for this task, focus on the runtime std::vector structure.","created_at":"2026-02-19T08:18:12Z"},{"id":8,"issue_id":"bd-1zg","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Audio Storage:** The Riff struct/class MUST hold the actual audio data (e.g., juce::AudioBuffer float).\n- **Creation:** When a loop is captured, deep-copy that audio region into a new Riff object.\n- **Playback Readiness:** The Riff object must be ready for immediate playback.\n- **Metadata:** Store BPM, length in bars, and capture time.","created_at":"2026-02-19T08:32:50Z"}]}
{"id":"bd-1zy","title":"History: Remove riff history limit (unlimited)","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-20T14:25:14.757733Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.397932Z","closed_at":"2026-02-20T14:43:17.397913Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":33,"issue_id":"bd-1zy","author":"Bill Tribble","text":"### Unlimited History\nRemove the modulo-100 or size-limit logic in RiffHistory. Allow the history to grow as long as memory permits, as background disk flushing will be added next.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-208","title":"V9 Architecture: Implement 'Sandwich' Layout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T08:01:32.447093Z","created_by":"billt","updated_at":"2026-02-21T08:13:55.405783Z","closed_at":"2026-02-21T08:13:55.405763Z","close_reason":"Implemented Sandwich layout with dynamic top and bottom panels. Verified build.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":40,"issue_id":"bd-208","author":"Bill Tribble","text":"### Detailed Context\nRestructure MainComponent to have a fixed TabBar and WaveformTimeline in the vertical center.\nCreate TopContentPanel to house ModeSelector (Instrument tab) or PresetSelector (Sound tab).\nCreate BottomPerformancePanel to house performance controls (XYPad, DrumPads, MicControls) based on the active mode.","created_at":"2026-02-21T08:01:56Z"}]}
{"id":"bd-20q","title":"UI: Riff history RTL pinning and slide-in animation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T14:05:04.431102Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.552589Z","closed_at":"2026-02-20T14:39:23.552559Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":26,"issue_id":"bd-20q","author":"Bill Tribble","text":"Animated riff history. Riffs are pinned from Right to Left. New riffs at the far right will slide up from the bottom. Existing riffs will slide left to make room.","created_at":"2026-02-20T14:09:02Z"}]}
{"id":"bd-222","title":"Fix: Mono to Stereo Input Mapping","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:03:14.173955Z","created_by":"billt","updated_at":"2026-02-21T15:06:28.912979Z","closed_at":"2026-02-21T15:06:28.912960Z","close_reason":"Implemented and verified fixes for Mono Input, FX Mode, Alignment, and Reverb Routing.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":55,"issue_id":"bd-222","author":"Bill Tribble","text":"### Detailed Context\nThe MacBook microphone and other mono sources typically report as 2-channel but only provide audio on the left channel. Current code preserves this, resulting in audio in only one ear. The fix ensures that any mono-mapped input is duplicated to both L and R channels for a centered stereo experience.","created_at":"2026-02-21T15:03:24Z"}]}
{"id":"bd-22e","title":"Audio: Support variable length riff layers (looping shorter layers)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T14:05:04.368435Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.551002Z","closed_at":"2026-02-20T14:39:23.550983Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":24,"issue_id":"bd-22e","author":"Bill Tribble","text":"Variable length riff support. Layers that are shorter than the master riff length will be looped to fill the duration. The master length is determined by the longest (usually newest) layer added.","created_at":"2026-02-20T14:09:01Z"}]}
{"id":"bd-22p","title":"Optimize UI rendering & investigate visual lag","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.476031Z","created_by":"billt","updated_at":"2026-02-22T08:01:15.703699Z","closed_at":"2026-02-22T08:01:15.703674Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":65,"issue_id":"bd-22p","author":"Bill Tribble","text":"### Detailed Context\nInvestigate the repaint cycle. Likely candidates for slowing down visual updates are RiffHistoryPanel, SandwichFramework, or redrawing large gradients/paths too often. Add setBufferedToImage(true) to static components and ensure repaint() is strictly localized to areas that need it.","created_at":"2026-02-22T07:57:54Z"}]}
{"id":"bd-245","title":"Implement FX Monitoring & Master Clock Syncing","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T16:51:52.056172Z","created_by":"billt","updated_at":"2026-02-21T16:59:09.266579Z","closed_at":"2026-02-21T16:59:09.266562Z","close_reason":"Removed dry audio baking on XY release. Quantized Retrospective capture using PPQ fmod math.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":63,"issue_id":"bd-245","author":"Bill Tribble","text":"### Detailed Context\\n\\n1. **FX Baking In**: When releasing the XY pad (FX_DISENGAGE), the effect is immediately and permanently baking into the previous riff audio instead of only feeding into the retrospective buffer. Ensure XY only controls monitor wet/dry and retrospective feed.\\n\\n2. **Loop Timing Sync**: Currently, when audio is captured from the retro-buffer into a new slot, the playback is slightly out of phase with existing loops. Both the playback loop buffer and the record buffer need to strictly anchor to the master clock's phase without trimming the raw audio. What is captured is exactly what should be played, perfectly in time.","created_at":"2026-02-21T16:52:43Z"}]}
{"id":"bd-262","title":"Update Spec and Rename Project to Samsara","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T10:21:55.038259Z","created_by":"billt","updated_at":"2026-02-22T10:25:27.212245Z","closed_at":"2026-02-22T10:25:27.212228Z","close_reason":"Renamed project successfully and updated spec","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":75,"issue_id":"bd-262","author":"Bill Tribble","text":"### Detailed Context\nCopy archive/v1/Spec/Spec_FlowZone_Looper1.6.md to Spec/Spec_Samsara_Looper2.1.md. Update it to reflect the current JUCE Native architecture (noting React is a future goal). Globally rename the project from FlowZone to Samsara across CMake, src, and build targets.","created_at":"2026-02-22T10:21:55Z"}]}
{"id":"bd-26v","title":"Retrospective UI: 4-Section Layout with Variable Time Scaling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:15:55.065140Z","created_by":"billt","updated_at":"2026-02-19T08:22:06.979271Z","closed_at":"2026-02-19T08:22:06.979251Z","close_reason":"Implemented 4-section layout with variable time scaling (1, 2, 4, 8 bars) in WaveformPanel.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-26v","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:15:55.065140Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":4,"issue_id":"bd-26v","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- Use WaveformPanel as the base class or reference.\n- The panel should be divided into 4 vertical strips of equal width.\n- Rightmost strip = 1 Bar.\n- 2nd from right = 2 Bars.\n- 3rd from right = 4 Bars.\n- Leftmost strip = 8 Bars.\n- **Squashing Logic:** All strips must show the full duration of their respective time windows. \n  - 1 Bar strip shows the last 1 bar of audio.\n  - 8 Bar strip shows the last 8 bars of audio.\n  - This means the 8 Bar strip's waveform will appear compressed (squashed) horizontally compared to the 1 Bar strip.\n  - The visual scroll speed will be different for each: 1 Bar moves fastest, 8 Bars moves slowest (1/8th speed).","created_at":"2026-02-19T08:18:09Z"}]}
{"id":"bd-27a","title":"RetrospectiveBuffer class — lock-free circular audio buffer","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:11.302833Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.098600Z","closed_at":"2026-02-19T07:51:44.098582Z","close_reason":"RetrospectiveBuffer.h/.cpp implemented. Lock-free circular ring buffer, prepare()/pushBlock()/getWaveformData(). Builds clean.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":1,"issue_id":"bd-27a","author":"Bill Tribble","text":"## Background\nPhase 2 of the V2 prototype. Mic audio is arriving via getNextAudioBlock(). We need a lock-free circular buffer that continuously captures the post-gain audio so we can retrieve it later for visualization and eventually for loop capture.\n\nReference: archive/v1/src/engine/RetrospectiveBuffer.h/.cpp — similar design, can be simplified for v2.\n\n## Implementation\n- New files: src/RetrospectiveBuffer.h, src/RetrospectiveBuffer.cpp\n- Circular buffer using juce::AudioBuffer<float> (stereo, 60s capacity)\n- prepare(double sampleRate, int maxSeconds) — allocates buffer, called from prepareToPlay\n- pushBlock(const float* const* channelData, int numChannels, int numSamples) — called from audio thread, writes to ring buffer with wrap-around. Use raw pointers (not juce::AudioBuffer ref) to avoid any allocation.\n- getWaveformData(int numOutputPoints) — called from message thread, returns std::vector<float> of downsampled peak data from the most recent N samples. Reads writeIndex atomically.\n- writeIndex is std::atomic<int> so message thread can read it safely. Single writer (audio thread), single reader (message thread) = safe without locks.\n- No allocation on audio thread. The buffer is pre-allocated in prepare().\n\n## Acceptance Criteria\n- [ ] Class compiles with no warnings\n- [ ] pushBlock called per audio callback doesn't allocate or lock\n- [ ] getWaveformData returns sensible descending-recency peak data\n- [ ] 60 seconds of audio can be stored at 44100/48000 Hz stereo","created_at":"2026-02-19T07:44:54Z"}]}
{"id":"bd-27m","title":"Build, test, and verify mic input prototype","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.187659Z","created_by":"billt","updated_at":"2026-02-19T07:40:28.632840Z","closed_at":"2026-02-19T07:40:28.632821Z","close_reason":"Verified by user in build","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27m","depends_on_id":"bd-2hy","type":"blocks","created_at":"2026-02-19T07:40:16.417134Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-27x","title":"V9.3: Restore Riff History instant refresh logic","status":"closed","priority":0,"issue_type":"bug","created_at":"2026-02-21T14:33:11.149334Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.893820Z","closed_at":"2026-02-21T14:39:06.893802Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-27z","title":"Implement horizontal scrolling for riff history","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T11:04:31.997274Z","created_by":"billt","updated_at":"2026-02-20T11:05:40.234396Z","closed_at":"2026-02-20T11:05:40.234381Z","close_reason":"Implemented horizontal scrolling with Viewport in RiffHistoryPanel","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":21,"issue_id":"bd-27z","author":"Bill Tribble","text":"### Detailed Context\nWe need to add a juce::Viewport to RiffHistoryPanel to support horizontal scrolling of the riff items. The current logic places newest on the right and moves left, but clips items that go off-screen. We will change this to allow scrolling through the entire history.","created_at":"2026-02-20T11:04:45Z"}]}
{"id":"bd-284","title":"Riffs: fix RTL screen pinning (latest on far-right)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:05:49.249583Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.553094Z","closed_at":"2026-02-20T14:39:23.553081Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2cc","title":"Redistribute Lowpass/Highpass X Range","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:43.942607Z","created_by":"billt","updated_at":"2026-02-22T08:55:16.264392Z","closed_at":"2026-02-22T08:55:16.264371Z","close_reason":"Completed logarithmic XY frequency mapping","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ek","title":"Riff Instant Playback & Visual Feedback","description":"Automatically play the riff upon capture and update the UI to show playback progress/active state in the history row.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:43:39.842637Z","created_by":"billt","updated_at":"2026-02-19T08:46:29.938627Z","closed_at":"2026-02-19T08:46:29.938613Z","close_reason":"Implemented instant playback after capture and visual cyan highlighting in the history row for playing riffs.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ek","depends_on_id":"bd-5uh","type":"discovered-from","created_at":"2026-02-19T08:43:39.842637Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-2ep","title":"Mixer State 'Commit' Metadata Logic","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.985973Z","created_by":"billt","updated_at":"2026-02-22T08:14:31.318315Z","closed_at":"2026-02-22T08:14:31.318299Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":70,"issue_id":"bd-2ep","author":"Bill Tribble","text":"### Detailed Context\nTrack fader levels and mute states for the 8 tracks. Show a 'Commit' button when settings differ from the default or the currently playing riff's state. When Committing, duplicate the current riff's 8 layers into a new Riff in the history panel. Save the adjustments as playback metadata (volume[8], isMuted[8]) on the new Riff. Do NOT bounce or bake the audio.","created_at":"2026-02-22T07:57:55Z"}]}
{"id":"bd-2fd","title":"Audio: Add Mic-Only Reverb to Mode tab","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T16:12:55.783820Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.037151Z","closed_at":"2026-02-20T19:11:46.037131Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2fw","title":"Audio: Fix riff playback speed dependency on buffer size","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-20T13:25:57.944997Z","created_by":"billt","updated_at":"2026-02-20T13:42:31.403960Z","closed_at":"2026-02-20T13:42:31.403945Z","close_reason":"Successfully fixed riff playback speed (made it block-size aware) and maximized riff layer height (removed padding/labels). Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2hs","title":"Implement Pattern-based TrGate","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T09:14:06.694005Z","created_by":"billt","updated_at":"2026-02-22T09:18:15.972522Z","closed_at":"2026-02-22T09:18:15.972501Z","close_reason":"Rebuilt TrGate to use 16 patterns","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":72,"issue_id":"bd-2hs","author":"Bill Tribble","text":"### Detailed Context\nChange TrGate from LFO-driven to pattern-based (classic trance gate). Define 16-step sequences. X axis selects pattern, Y axis controls depth/mix.","created_at":"2026-02-22T09:14:06Z"}]}
{"id":"bd-2hy","title":"Implement MainComponent — mic input, gain knob, monitor toggle, audio callback","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.166512Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366888Z","closed_at":"2026-02-19T07:40:16.366874Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ja","title":"Implement SandwichFramework component","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:42:30.639795Z","created_by":"billt","updated_at":"2026-02-21T14:45:23.818411Z","closed_at":"2026-02-21T14:45:23.818386Z","close_reason":"Completed architectural refactor to Sandwich Framework","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2kk","title":"Implement Granular Pitch Shifter for Pitchmod","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T09:46:26.984744Z","created_by":"billt","updated_at":"2026-02-22T09:50:29.884398Z","closed_at":"2026-02-22T09:50:29.884383Z","close_reason":"UI rearranged and custom granular Pitchmod implemented via StandaloneFXEngine","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":74,"issue_id":"bd-2kk","author":"Bill Tribble","text":"### Detailed Context\nReplace the old Pitchmod ringmod code with a true time-preserving Pitch Shifter using granular synthesis.\nX-axis: Smooth semitones (-12 to +12, wide center deadzone).\nY-axis: Snapped intervals (-24, -19, -17, -12, -7, -5, 0, 5, 7, 12, 17, 19, 24).\nCombine X and Y axis values.","created_at":"2026-02-22T09:46:27Z"}]}
{"id":"bd-2mb","title":"Metadata: Add source and timestamp to Riffs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T14:25:14.725930Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.397280Z","closed_at":"2026-02-20T14:43:17.397268Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":30,"issue_id":"bd-2mb","author":"Bill Tribble","text":"### Enhanced Riff Metadata\nUpdate Riff struct to include:\n- : Exact wall-clock time of capture.\n- : Source identifier (default 'Microphone').\n- Ensure these fields are serialized/deserialized correctly if persistence is added later.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-2o7","title":"Riffs: Fix layer height to exactly 1/8th of full riff","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:25:58.937489Z","created_by":"billt","updated_at":"2026-02-20T13:42:31.404675Z","closed_at":"2026-02-20T13:42:31.404660Z","close_reason":"Successfully fixed riff playback speed (made it block-size aware) and maximized riff layer height (removed padding/labels). Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2oj","title":"Fix: FX Mode Buffer Routing & Resample Logic","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:03:14.208527Z","created_by":"billt","updated_at":"2026-02-21T15:06:28.915041Z","closed_at":"2026-02-21T15:06:28.914986Z","close_reason":"Implemented and verified fixes for Mono Input, FX Mode, Alignment, and Reverb Routing.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":56,"issue_id":"bd-2oj","author":"Bill Tribble","text":"### Detailed Context\n1. While FX tab is active and XY Pad is NOT held: Buffer and display Must show the DRY mic signal.\n2. While XY Pad is HELD: Monitoring swaps to wet signal, and only the WET signal is pushed to the buffer and display.\n3. On Release: Monitoring and buffer swap back to dry instantly. No automatic commit.\n4. Commitment/Resampling: If capturing a new loop while in FX mode with layers selected, the new loop replaces the original source layers (deleting the source wet layers from the mix).","created_at":"2026-02-21T15:03:24Z"}]}
{"id":"bd-2ok","title":"Riffs: drop right to left animation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:50:50.312069Z","created_by":"billt","updated_at":"2026-02-20T12:53:41.755980Z","closed_at":"2026-02-20T12:53:41.755963Z","close_reason":"Completed successfully. Verified with build.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2s0","title":"Fix riff layer stacking visualization","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T14:45:53.760225Z","created_by":"billt","updated_at":"2026-02-21T14:47:42.443128Z","closed_at":"2026-02-21T14:47:42.443115Z","close_reason":"Fixed mono mic balance and riff layer stacking inheritance.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2s4","title":"Refactor FX tab into Sandwich components","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:42:30.956985Z","created_by":"billt","updated_at":"2026-02-21T14:45:23.822786Z","closed_at":"2026-02-21T14:45:23.822771Z","close_reason":"Completed architectural refactor to Sandwich Framework","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ti","title":"WaveformPanel component — scrolling horizontal waveform display","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:25.389950Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.129620Z","closed_at":"2026-02-19T07:51:44.129602Z","close_reason":"WaveformPanel.h/.cpp implemented. Scrolling waveform, 4 bar division lines, premium gradient rendering. Builds clean.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":2,"issue_id":"bd-2ti","author":"Bill Tribble","text":"## Background\nA horizontal JUCE component that displays a scrolling waveform of the retrospective buffer content. Audio flows from right to left (newest audio enters on the right, oldest audio exits on the left). The panel has 4 vertical division markers showing bar boundaries.\n\n## Implementation\n- New files: src/WaveformPanel.h, src/WaveformPanel.cpp\n- Custom juce::Component, full-width horizontal strip\n- paint() draws:\n  1. Dark background with subtle gradient (match app theme 0xFF0F0F23)\n  2. Waveform path — vertical peak lines or filled path, drawn from left (oldest) to right (newest). Color: green gradient matching the app accent (0xFF00CC66).\n  3. Four vertical division lines at positions corresponding to 1 bar, 2 bars, 4 bars, and 8 bars from the right edge. Labels above each: '1', '2', '4', '8'. Divisions measured from right edge since newest audio is on the right.\n  4. Subtle grid lines or markers for visual context.\n- setWaveformData(const std::vector<float>& data) — called from timer on message thread. Stores data and calls repaint().\n- setBPM(double bpm) and setSampleRate(double sr) — needed to calculate bar positions in pixels. Default BPM=120.\n- Bar width in samples = (60.0 / bpm) * 4.0 * sampleRate (4 beats per bar)\n- The total visible window should show 8 bars worth of audio. The getWaveformData() call should request data for exactly this duration.\n- Height: ~100-120px, premium look with anti-aliased rendering.\n\n## Acceptance Criteria\n- [ ] Component renders a horizontal waveform strip\n- [ ] Waveform scrolls right-to-left when fed updating data\n- [ ] 4 vertical divisions visible at 1/2/4/8 bar positions from right\n- [ ] Division positions update correctly if BPM changes\n- [ ] Looks premium — dark background, gradient waveform, anti-aliased lines","created_at":"2026-02-19T07:45:12Z"}]}
{"id":"bd-2tx","title":"Fix: Mic Reverb Routing (Input-Only)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:03:14.280165Z","created_by":"billt","updated_at":"2026-02-21T15:06:28.916130Z","closed_at":"2026-02-21T15:06:28.916115Z","close_reason":"Implemented and verified fixes for Mono Input, FX Mode, Alignment, and Reverb Routing.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":58,"issue_id":"bd-2tx","author":"Bill Tribble","text":"### Detailed Context\nMic Reverb is currently a global effect on the master output. It must be moved to the input processing chain (pre-buffer) so it only affects the voice/instrument and is baked into the captured loop, rather than being applied indiscriminately to all riff playback.","created_at":"2026-02-21T15:03:24Z"}]}
{"id":"bd-2un","title":"Mix-A-View Zigzag Faders & Mutes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.899346Z","created_by":"billt","updated_at":"2026-02-22T08:12:48.378052Z","closed_at":"2026-02-22T08:12:48.378036Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":69,"issue_id":"bd-2un","author":"Bill Tribble","text":"### Detailed Context\nBottom Half: Create staggered 8-channel zigzag view (Odd slots top, Even slots bottom). Create custom juce::Slider LookAndFeel with a bouncing VU meter inside the active thumb/track. Add 1-tap mute interaction.","created_at":"2026-02-22T07:57:54Z"}]}
{"id":"bd-2v7","title":"Mixer View Settings & Audible Metronome","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.814663Z","created_by":"billt","updated_at":"2026-02-22T08:08:19.113008Z","closed_at":"2026-02-22T08:08:19.112990Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":68,"issue_id":"bd-2v7","author":"Bill Tribble","text":"### Detailed Context\nTop Half: Layout app settings. Add toggle for Quantize (UI only), toggle for Metronome (linked to audio engine), and a ... Settings button.\nMetronome: Build an audible click track synthesizer synced to the Tempo and TransportState that outputs to the main audio block when enabled.","created_at":"2026-02-22T07:57:54Z"}]}
{"id":"bd-2x4","title":"Fix mono mic input balance","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T14:45:53.726482Z","created_by":"billt","updated_at":"2026-02-21T14:47:42.442001Z","closed_at":"2026-02-21T14:47:42.441982Z","close_reason":"Fixed mono mic balance and riff layer stacking inheritance.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2yz","title":"Cleanup: Scrap Legacy FX Engine","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T08:03:57.934754Z","created_by":"billt","updated_at":"2026-02-21T08:08:02.406489Z","closed_at":"2026-02-21T08:08:02.406473Z","close_reason":"Completed legacy FX code removal. Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2z7","title":"Logic: Sum 8 layers into 1 when limit reached","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T14:52:14.881389Z","created_by":"billt","updated_at":"2026-02-20T15:03:00.389002Z","closed_at":"2026-02-20T15:03:00.388988Z","close_reason":"Completed and verified v7 polish.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":36,"issue_id":"bd-2z7","author":"Bill Tribble","text":"### 8-Layer Summing\nLogic for managing large Riff histories:\n1. When a capture happens, check the basis Riff's layer count.\n2. If basis.layers >= 8, call a new basis.sumLayers() method.\n3. sumLayers() will render all 8 waveforms into a single History buffer, clear the layerBuffers list, and push that single summed buffer back in.\n4. The capture then adds the 9th layer as usual.\n5. Result: The new Riff box will have 2 layers (Old History + New Layer), maintaining visual clarity and performance.","created_at":"2026-02-20T14:56:47Z"}]}
{"id":"bd-30e","title":"UI: add play/pause button to header","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:50:53.308644Z","created_by":"billt","updated_at":"2026-02-20T12:53:41.758245Z","closed_at":"2026-02-20T12:53:41.758233Z","close_reason":"Completed successfully. Verified with build.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-31t","title":"Hide XY Pad circle on mouse up","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:49:21.534218Z","created_by":"billt","updated_at":"2026-02-21T14:51:16.595187Z","closed_at":"2026-02-21T14:51:16.595164Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":54,"issue_id":"bd-31t","author":"Bill Tribble","text":"### Detailed Context\nThe XY Pad circle was persisting after mouse release because mouseUp lacked a repaint() call. Adding repaint() ensures the visual indicator disappears as intended since the paint method checks isMouseButtonDown().","created_at":"2026-02-21T14:50:25Z"}]}
{"id":"bd-32o","title":"Audio: BPM affects riff playback pitch/speed","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:32:34.248013Z","created_by":"billt","updated_at":"2026-02-20T12:39:29.031760Z","closed_at":"2026-02-20T12:39:29.031748Z","close_reason":"Refinements completed and verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-330","title":"V9.3: XY Pad and Layer Grid refinements (Hide circle, disable unrecorded)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:33:11.182293Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.897026Z","closed_at":"2026-02-21T14:39:06.897015Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-336","title":"Bug: Fix Stereo Monitoring (Mono-to-Stereo Mapping)","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:14:53.363085Z","created_by":"billt","updated_at":"2026-02-21T15:17:43.914995Z","closed_at":"2026-02-21T15:17:43.914968Z","close_reason":"Implemented phase-locked alignment, centered stereo monitoring with reverb, and consolidated FX bounce workflow.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":59,"issue_id":"bd-336","author":"Bill Tribble","text":"### Detailed Context\nThe monitor path currently bypasses the mono-to-stereo mapping, causing audio to stay in the left ear. The fix ensures  is used as the source for hardware output monitoring so the L->L+R mapping is preserved for the user's ears.","created_at":"2026-02-21T15:15:04Z"}]}
{"id":"bd-34h","title":"V9.3: Remove Sound tab and cleanup Tabs Layout","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T14:33:11.050633Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.895940Z","closed_at":"2026-02-21T14:39:06.895929Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-34s","title":"FX Fix: Remove Mix, active on XY click, feedback to buffer","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:32:34.157980Z","created_by":"billt","updated_at":"2026-02-20T12:39:29.030124Z","closed_at":"2026-02-20T12:39:29.030107Z","close_reason":"Refinements completed and verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-355","title":"Logic: playback-driven layering (remove 5s window)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T14:05:04.400682Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.552116Z","closed_at":"2026-02-20T14:39:23.552095Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":25,"issue_id":"bd-355","author":"Bill Tribble","text":"Playback-driven layering logic. Removes the 5-second timer. New layers will always target the currently playing riff. If no riff is playing, a new riff entry is created.","created_at":"2026-02-20T14:09:02Z"}]}
{"id":"bd-36l","title":"Replace GoTo with Gate Trip","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:51.456153Z","created_by":"billt","updated_at":"2026-02-22T08:54:15.012107Z","closed_at":"2026-02-22T08:54:15.012052Z","close_reason":"Duplicate","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ba","title":"Bug: Phase-Locked Riff Playback for Perfect Alignment","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:14:53.401427Z","created_by":"billt","updated_at":"2026-02-21T15:17:43.917741Z","closed_at":"2026-02-21T15:17:43.917723Z","close_reason":"Implemented phase-locked alignment, centered stereo monitoring with reverb, and consolidated FX bounce workflow.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":60,"issue_id":"bd-3ba","author":"Bill Tribble","text":"### Detailed Context\nThe  now implements phase-locking. It derives its samples position from the global PPQ clock () instead of a local sample counter. This ensures perfect synchronization between all playing layers and the recording/capture process.","created_at":"2026-02-21T15:15:04Z"}]}
{"id":"bd-3c5","title":"Route riff playback through FX in FX mode","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T11:04:33.018993Z","created_by":"billt","updated_at":"2026-02-20T11:06:22.190178Z","closed_at":"2026-02-20T11:06:22.190166Z","close_reason":"Implemented riff capture timeout and verified FX routing","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":22,"issue_id":"bd-3c5","author":"Bill Tribble","text":"### Detailed Context\nWhen in FX mode, the riff signal should be processed by the delay line. We need to ensure that the riff audio is summed into the processing buffer before the delay effect loop, so the delay captures the riff signal as well as the mic input.","created_at":"2026-02-20T11:04:46Z"}]}
{"id":"bd-3eb","title":"Implement Stutter Gate FX","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:51.401035Z","created_by":"billt","updated_at":"2026-02-22T08:54:15.012678Z","closed_at":"2026-02-22T08:54:15.012665Z","close_reason":"Duplicate","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3es","title":"Riffs: Fix 'tiny' layer height and normalize thumbnails","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:50:14.427911Z","created_by":"billt","updated_at":"2026-02-20T14:39:23.553528Z","closed_at":"2026-02-20T14:39:23.553516Z","close_reason":"Completed and verified in v5 build. Transitions to v6 Immutable History model.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3f1","title":"Redistribute Lowpass/Highpass X Range","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:51.345133Z","created_by":"billt","updated_at":"2026-02-22T08:54:15.013332Z","closed_at":"2026-02-22T08:54:15.013319Z","close_reason":"Duplicate","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3f6","title":"Riffs: verify layer stacking order (Bottom-up)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:05:50.248436Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.398432Z","closed_at":"2026-02-20T14:43:17.398416Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":31,"issue_id":"bd-3f6","author":"Bill Tribble","text":"### Layer Cake Visualization\nEnsure that the RiffHistoryPanel draws layers from bottom to top (bottom-up stacking). \nThe oldest layer (Layer 1) should be at the base of the riff box, and new layers should appear above it.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-3fc","title":"V9.3: Implement Mic Mode Visual Indicator","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:33:11.081689Z","created_by":"billt","updated_at":"2026-02-21T14:39:06.897454Z","closed_at":"2026-02-21T14:39:06.897438Z","close_reason":"V9.3 Maintenance Fixes Completed and Verified","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3hd","title":"Riffs: implement layer cake stacking visualization","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:50:51.310931Z","created_by":"billt","updated_at":"2026-02-20T12:53:41.757409Z","closed_at":"2026-02-20T12:53:41.757395Z","close_reason":"Completed successfully. Verified with build.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3j1","title":"Implement Autoplay when creating new Riff","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T17:39:38.380343Z","created_by":"billt","updated_at":"2026-02-22T17:42:17.773149Z","closed_at":"2026-02-22T17:42:17.773116Z","close_reason":"Added autoplay functionality when creating a new Riff.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3j9","title":"Audio: Fix playback speed sample rate dependency","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-20T13:50:13.419899Z","created_by":"billt","updated_at":"2026-02-20T14:51:46.348540Z","closed_at":"2026-02-20T14:51:46.348522Z","close_reason":"Closed as requested by user.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3k0","title":"Logic: Immutable Riff History (every capture is a new entry)","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T14:25:14.631139Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.394398Z","closed_at":"2026-02-20T14:43:17.394380Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":27,"issue_id":"bd-3k0","author":"Bill Tribble","text":"### Immutable Snapshotting Logic\nWhen a capture is triggered:\n1. Identify the currently playing riff (the 'parent').\n2. Create a deep copy of the Riff struct (including all existing layers).\n3. Record new metadata (timestamp, source='Microphone').\n4. Add the new audio buffer to the copied Riff via merge().\n5. Add the newly created Riff to the history list.\n\n### Result\nEach entry in the history panel will show a 'staircase' of layers. This allows the user to click a previous riff to instantly 'undo' back to that specific looper state while preserving the more complex states on the right.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-3li","title":"Fix silent Riff playback: audio routing issue with Monitor OFF","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-19T08:56:09.193004Z","created_by":"billt","updated_at":"2026-02-19T22:12:27.689798Z","closed_at":"2026-02-19T22:12:27.689774Z","close_reason":"Cleared input buffer before mixing riffs if monitor is off.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":10,"issue_id":"bd-3li","author":"Bill Tribble","text":"When Monitor is OFF, bufferToFill.clearActiveBufferRegion() is called AFTER riffEngine.processNextBlock(*buffer), silencing riffs too. Fix: Clear input buffer BEFORE mixing riffs.","created_at":"2026-02-19T08:56:19Z"}]}
{"id":"bd-3ow","title":"Riff Display: Layer cake waveform with zebra pattern","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:32:34.191538Z","created_by":"billt","updated_at":"2026-02-20T12:39:29.030987Z","closed_at":"2026-02-20T12:39:29.030974Z","close_reason":"Refinements completed and verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3pn","title":"Integration — wire buffer + panel into MainComponent and update spec","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:30.450172Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.155717Z","closed_at":"2026-02-19T07:51:44.155702Z","close_reason":"Wired into MainComponent: prepareToPlay allocates buffer, getNextAudioBlock pushes, timerCallback feeds panel. Window height 750. CMakeLists updated. Build succeeded.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3pn","depends_on_id":"bd-27a","type":"blocks","created_at":"2026-02-19T07:44:37.091938Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-3pn","depends_on_id":"bd-2ti","type":"blocks","created_at":"2026-02-19T07:44:37.113170Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":3,"issue_id":"bd-3pn","author":"Bill Tribble","text":"## Background\nFinal integration task. Wire the RetrospectiveBuffer and WaveformPanel into MainComponent so the whole pipeline works end-to-end: mic → gain → peak metering → retrospective buffer → waveform display.\n\n## Implementation\n\n### MainComponent.h changes:\n- #include RetrospectiveBuffer.h and WaveformPanel.h\n- Add members: RetrospectiveBuffer retroBuffer; WaveformPanel waveformPanel;\n- Add member: double currentSampleRate = 0.0;\n\n### MainComponent.cpp changes:\n\n1. Constructor:\n   - addAndMakeVisible(waveformPanel)\n   - waveformPanel.setBPM(120.0) (hardcoded for now)\n   - Increase window height from 600 to ~750 to accommodate waveform panel\n\n2. prepareToPlay():\n   - retroBuffer.prepare(sampleRate, 60) — 60 seconds storage\n   - waveformPanel.setSampleRate(sampleRate)\n   - Store currentSampleRate = sampleRate\n\n3. getNextAudioBlock():\n   - After gain is applied and peak is computed, call retroBuffer.pushBlock(channelData, numChannels, numSamples)\n   - This must happen BEFORE the monitor check clears the buffer\n\n4. timerCallback():\n   - Calculate 8 bars in samples: int eightBars = (int)((60.0/120.0) * 4.0 * 8.0 * currentSampleRate)\n   - auto waveform = retroBuffer.getWaveformData(eightBars, panelWidthInPixels)\n   - waveformPanel.setWaveformData(waveform)\n\n5. resized():\n   - Add waveformPanel below the existing content\n   - Full width, ~120px height at bottom\n   - Adjust existing layout to make room\n\n### Spec update:\n- Update Spec_FlowZone_V2_Prototype.md to reflect Phase 2 features\n- Move retrospective buffer from Non-Goals to current scope\n- Update architecture diagram and signal flow\n- Update file structure section\n\n### Build:\n- Add new .h/.cpp files to CMakeLists.txt / Projucer\n- Build with xcodebuild, verify no warnings\n\n## Acceptance Criteria\n- [ ] App launches and shows waveform panel below existing mic controls\n- [ ] Speaking/playing into mic shows waveform flowing right-to-left\n- [ ] 4 bar division lines visible and correctly positioned at 120 BPM\n- [ ] Level meter still works correctly\n- [ ] Gain knob still affects waveform amplitude\n- [ ] Monitor toggle still works\n- [ ] No audio glitches, no allocation on audio thread\n- [ ] Spec updated to reflect Phase 2\n- [ ] Builds clean with no warnings\n- [ ] Git committed and pushed","created_at":"2026-02-19T07:45:33Z"}]}
{"id":"bd-3qw","title":"Rationalise FX List","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T09:14:06.600918Z","created_by":"billt","updated_at":"2026-02-22T09:18:15.916731Z","closed_at":"2026-02-22T09:18:15.916702Z","close_reason":"Removed deprecated FX and updated indices","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":71,"issue_id":"bd-3qw","author":"Bill Tribble","text":"### Detailed Context\nRemove Distortion, Ripper, Channel, and Compress. Rename Saturator to Distort. Update both UI arrays and StandaloneFXEngine.","created_at":"2026-02-22T09:14:06Z"}]}
{"id":"bd-3r4","title":"UI: Add Mixer tab and placeholder settings","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T14:25:14.693703Z","created_by":"billt","updated_at":"2026-02-20T14:43:17.396827Z","closed_at":"2026-02-20T14:43:17.396814Z","close_reason":"V6.1 Immutable History and Mixer UI implemented and verified.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":29,"issue_id":"bd-3r4","author":"Bill Tribble","text":"### Mixer UI Implementation\n1. Add 'MIXER' Tab: Update MiddleMenuPanel to include a third button in the radio group.\n2. Mixer Container: Add a new sub-component for the mixer tab content.\n3. Looper Settings: Implement custom Toggle Switches in the top half for behavior flags (e.g., 'Snap to Bar Mode').\n4. Aesthetic: Ensure the switches match the FlowZone neon/premium aesthetic.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-3r7","title":"UI: Move BPM to Header with drag interface","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T16:12:55.752579Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.036724Z","closed_at":"2026-02-20T19:11:46.036711Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3rr","title":"Vertical Mixer faders with empty state disablement","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T17:39:38.341099Z","created_by":"billt","updated_at":"2026-02-22T17:41:48.414039Z","closed_at":"2026-02-22T17:41:48.414022Z","close_reason":"Converted mixer faders to vertical and added disabled state for empty layers.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3ua","title":"Implement Stutter Gate FX","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:44.006015Z","created_by":"billt","updated_at":"2026-02-22T08:57:15.113356Z","closed_at":"2026-02-22T08:57:15.113338Z","close_reason":"Implemented Stutter Gate and replaced GoTo with Gate Trip","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-592","title":"Update FX Page Layout","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T09:46:26.883835Z","created_by":"billt","updated_at":"2026-02-22T09:50:29.882027Z","closed_at":"2026-02-22T09:50:29.882005Z","close_reason":"UI rearranged and custom granular Pitchmod implemented via StandaloneFXEngine","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":73,"issue_id":"bd-592","author":"Bill Tribble","text":"### Detailed Context\nRefactor the FXTabTop arrays:\nMove Keymasher and Pitchmod to CoreFX. Move Buzz to InfFX, placing Dub Delay on CoreFX. Fix the StandaloneFXEngine switch cases to match.","created_at":"2026-02-22T09:46:26Z"}]}
{"id":"bd-5uh","title":"Implement Riff Layering (Merge Logic)","description":"Add logic to sum newly captured audio into the current riff (up to 8 layers) instead of always creating a new riff entry.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:43:32.569425Z","created_by":"billt","updated_at":"2026-02-19T08:46:29.908052Z","closed_at":"2026-02-19T08:46:29.908036Z","close_reason":"Implemented riff merging logic and layer count tracking.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-7k0","title":"Fix Audio Playback (Speed/Pitch/Jank)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T13:54:39.949881Z","created_by":"billt","updated_at":"2026-02-21T13:58:59.476933Z","closed_at":"2026-02-21T13:58:59.476917Z","close_reason":"Audio fixes (speed/layering) and FX layout refinements completed and verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":50,"issue_id":"bd-7k0","author":"Bill Tribble","text":"### Context: Double-Speed Bug\nThe audio sounds twice as fast because  is called twice in  (once for dry layers and once for wet). Each call advances the internal  of the playing riffs.\n**Fix**: Refactor  to handle dry/wet separation in a single pass.","created_at":"2026-02-21T13:54:56Z"},{"id":51,"issue_id":"bd-7k0","author":"Bill Tribble","text":"### Context: Double-Speed Bug\nThe audio sounds twice as fast because RiffPlaybackEngine::processNextBlock is called twice in MainComponent::getNextAudioBlock (once for dry layers and once for wet). Each call advances the internal currentPosition of the playing riffs.\n**Fix**: Refactor processNextBlock to handle dry/wet separation in a single pass.","created_at":"2026-02-21T13:55:03Z"}]}
{"id":"bd-862","title":"Implement Riff Playback Engine","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:30:18.362096Z","created_by":"billt","updated_at":"2026-02-19T08:41:25.255939Z","closed_at":"2026-02-19T08:41:25.255916Z","close_reason":"Implemented RiffPlaybackEngine and integrated it into MainComponent. Wired history selection to playback. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-862","depends_on_id":"bd-1zg","type":"blocks","created_at":"2026-02-19T08:32:52.768988Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-862","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:32:51.097794Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":9,"issue_id":"bd-862","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Engine:** Create a RiffPlaybackEngine class that mixes active riffs into the main audio output.\n- **Triggering:** Provide a method `playRiff(Riff* riff)` or similar.\n- **Mixing:** Sum the audio from active riffs with the dry/monitor signal.\n- **Simple Implementation:** For now, just a \"fire and forget\" one-shot playback of the riff is sufficient to correct functionality. Looping logic can come later.","created_at":"2026-02-19T08:32:54Z"}]}
{"id":"bd-ai1","title":"Feature: Bar-Quantized Riff Capture Alignment","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-21T15:03:14.244412Z","created_by":"billt","updated_at":"2026-02-21T15:06:28.915662Z","closed_at":"2026-02-21T15:06:28.915648Z","close_reason":"Implemented and verified fixes for Mono Input, FX Mode, Alignment, and Reverb Routing.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":57,"issue_id":"bd-ai1","author":"Bill Tribble","text":"### Detailed Context\nLoops currently do not align because they are captured at the exact moment of button press. The implementation will use the transport's barPhase and BPM to calculate the most recent musically aligned bar boundary in the retrospective buffer, ensuring all new layers are phase-synced with existing ones.","created_at":"2026-02-21T15:03:24Z"}]}
{"id":"bd-c23","title":"Implement Blank Canvas (+) Button","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T10:21:55.265696Z","created_by":"billt","updated_at":"2026-02-22T10:35:29.648260Z","closed_at":"2026-02-22T10:35:29.648246Z","close_reason":"Implemented Blank Canvas button","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":78,"issue_id":"bd-c23","author":"Bill Tribble","text":"### Detailed Context\nAdd a '+' button to the top right of the UI. Clicking it pushes a brand new empty Riff to the end of the RiffHistory sequence, allowing the user to begin capturing silently in a fresh state while remaining in the same overall Jam.","created_at":"2026-02-22T10:21:55Z"},{"id":79,"issue_id":"bd-c23","author":"Bill Tribble","text":"### Detailed Context\\nAdded newRiffButton (+) to the header UI that creates a new Riff initialized with 0 layers and appends it to RiffHistory. Wired to the disk and session pipeline so blank riffs persist effortlessly.","created_at":"2026-02-22T10:35:29Z"}]}
{"id":"bd-dqv","title":"Implement Signalsmith Stretch Pitch Shifter","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T10:21:55.122286Z","created_by":"billt","updated_at":"2026-02-22T10:28:12.632819Z","closed_at":"2026-02-22T10:28:12.632805Z","close_reason":"Implemented Signalsmith Stretch and verified successful build","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":76,"issue_id":"bd-dqv","author":"Bill Tribble","text":"### Detailed Context\nReplace the temporary custom granular pitch engine in StandaloneFXEngine with the Signalsmith-Stretch C++ header. Keep the same XY rules: X is semi-tones (-12 to +12) with a center deadzone, Y is snapped intervals (P4, P5, Octaves) with a center deadzone.","created_at":"2026-02-22T10:21:55Z"}]}
{"id":"bd-dy9","title":"Create CMake config with minimal JUCE modules","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.105834Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.365528Z","closed_at":"2026-02-19T07:40:16.365510Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-eov","title":"Refactor Mode tab into Sandwich components","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-21T14:42:30.779149Z","created_by":"billt","updated_at":"2026-02-21T14:45:23.820713Z","closed_at":"2026-02-21T14:45:23.820691Z","close_reason":"Completed architectural refactor to Sandwich Framework","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-i5f","title":"Implement Disk Writer and Session Hydration","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T10:21:55.194291Z","created_by":"billt","updated_at":"2026-02-22T10:33:33.558209Z","closed_at":"2026-02-22T10:33:33.558192Z","close_reason":"Implemented DiskWriter thread and SessionManager for FLAC hydration","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":77,"issue_id":"bd-i5f","author":"Bill Tribble","text":"### Detailed Context\nBuild a background thread that encodes recorded layers as FLACs to ~/Documents/Samsara/[CurrentGem]/. Maintain a pointer file at the root to tell the app which jam to re-hydrate on startup so sessions persist. Save metadata as session_state.json.","created_at":"2026-02-22T10:21:55Z"}]}
{"id":"bd-ila","title":"Dynamic Loop Length Settings and Progressive Looper Display","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-22T17:39:38.458331Z","created_by":"billt","updated_at":"2026-02-22T17:46:34.023389Z","closed_at":"2026-02-22T17:46:34.023357Z","close_reason":"Implemented loop lengths selector array and dynamic threshold based progressive looper.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-j87","title":"Audio: add 3ms crossfade for FX toggle","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T13:05:51.333622Z","created_by":"billt","updated_at":"2026-02-20T14:51:25.334093Z","closed_at":"2026-02-20T14:51:25.334076Z","close_reason":"Closed as requested by user.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":32,"issue_id":"bd-j87","author":"Bill Tribble","text":"### Audio Smoothing\nImplement a 3ms linear ramp (crossfade) when toggling FX or shifting between looper states that aren't perfectly phase-aligned.","created_at":"2026-02-20T14:39:38Z"}]}
{"id":"bd-k63","title":"Implement FX mode with Delay effect and XY controller","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-19T22:54:58.727578Z","created_by":"billt","updated_at":"2026-02-20T07:25:20.697302Z","closed_at":"2026-02-20T07:25:20.697287Z","close_reason":"Implemented FX mode with Delay effect and custom XYPad controller. Integrated into MiddleMenuPanel. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-k63","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:55:10.945250Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":20,"issue_id":"bd-k63","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'Add FX mode: when user goes to FX mode, route output audio to the FX. Add one effect to test - a delay. build an xy controller for it in lower half of screen beneath riffs view (move everything up to fit). i want you to use this ui image as inspiration, not a goal'\n\n**Actionable Steps:**\n1. Connect the 'FX' tab in the new menu to route audio into an FX bus in JUCE.\n2. Add a basic Delay effect to test the route.\n3. Build an XY touch controller in the lower half of the React UI (below the riffs view). You may need to translate/scale the canvas and upper components up to fit it.","created_at":"2026-02-19T22:58:11Z"}]}
{"id":"bd-k7h","title":"Implement FX Mode pagination and swipes","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T07:57:54.638526Z","created_by":"billt","updated_at":"2026-02-22T08:03:08.569470Z","closed_at":"2026-02-22T08:03:08.569451Z","close_reason":"Completed","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":66,"issue_id":"bd-k7h","author":"Bill Tribble","text":"### Detailed Context\nImplement swipe gesture handling to paginate between Page 1 (12 Core FX) and Page 2 (12 Infinite FX). Add dot indicators (Page 1 / 2) above the tabs in the MiddleMenuPanel.","created_at":"2026-02-22T07:57:54Z"}]}
{"id":"bd-l9z","title":"Riff History UI & Load Interaction","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","updated_at":"2026-02-19T08:39:57.229007Z","closed_at":"2026-02-19T08:39:57.228992Z","close_reason":"Implemented RiffHistoryPanel UI and integrated it into MainComponent. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-l9z","depends_on_id":"bd-1zg","type":"blocks","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-l9z","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":7,"issue_id":"bd-l9z","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Visual Flow:** The Riff History row must appear BELOW the main Retrospective Looper.\n- **Direction:** Items (riffs) flow from RIGHT to LEFT, matching the retrospective waveform direction. Newest riffs appear on the right.\n- **Interaction:**\n  - Clicking a Riff in the history should trigger it (or toggle its mute state, depending on final design, but for now just visual confirmation of selection).\n- **Rendering:**\n  - Each riff should show a mini-waveform or distinct color block.\n  - Must look distinct from the main retrospective looper.","created_at":"2026-02-19T08:30:20Z"}]}
{"id":"bd-lac","title":"UI: Fix RiffHistoryPanel animation for first 3 riffs","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T16:12:55.880880Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.038439Z","closed_at":"2026-02-20T19:11:46.038428Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ltu","title":"UI: Fix LabeledKnob vertical scaling","status":"closed","priority":3,"issue_type":"task","created_at":"2026-02-20T16:12:55.850795Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.038094Z","closed_at":"2026-02-20T19:11:46.038082Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-mbl","title":"UI: Labels next to dials, Gain default 10dB, Play/Pause button","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:32:34.218319Z","created_by":"billt","updated_at":"2026-02-20T12:39:29.031380Z","closed_at":"2026-02-20T12:39:29.031368Z","close_reason":"Refinements completed and verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-mnk","title":"Implement Retrospective Interactions & Riff History","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-19T08:14:52.659368Z","created_by":"billt","updated_at":"2026-02-19T08:41:38.563012Z","closed_at":"2026-02-19T08:41:38.562997Z","close_reason":"All child tasks completed: Retrospective UI, Click-to-Loop logic, Riff Data Model, Riff History UI, and Playback Engine.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-mud","title":"Relocate Settings button and clean up Mode tab","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T17:39:38.298033Z","created_by":"billt","updated_at":"2026-02-22T17:40:57.657881Z","closed_at":"2026-02-22T17:40:57.657853Z","close_reason":"Relocated settings to MixerTop and removed Reverb Bypass from ModeBottom.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-ph4","title":"Add Keyboard Controls for Buffer Taps","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T08:53:44.116126Z","created_by":"billt","updated_at":"2026-02-22T08:58:27.612578Z","closed_at":"2026-02-22T08:58:27.612517Z","close_reason":"Implemented keyboard controls","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-s6w","title":"Metronome pitch adjustment for downbeat","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-22T17:39:38.418739Z","created_by":"billt","updated_at":"2026-02-22T17:43:21.777729Z","closed_at":"2026-02-22T17:43:21.777709Z","close_reason":"Implemented 4-beat cycle with pitch shift on downbeat.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-s9s","title":"Riffs: Fix RTL viewport/layout pinning","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T13:13:24.122085Z","created_by":"billt","updated_at":"2026-02-20T13:17:33.767125Z","closed_at":"2026-02-20T13:17:33.767112Z","close_reason":"Successfully fixed Riff playback audio glitches (removed double-processing), fixed Riff UI visibility (changed Layer 1 color), and refined RTL pinning logic. Build verified.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-szq","title":"Audio: Implement per-layer gain in Riff to prevent distortion","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-20T16:12:55.818232Z","created_by":"billt","updated_at":"2026-02-20T19:11:46.037701Z","closed_at":"2026-02-20T19:11:46.037690Z","close_reason":"Implemented v8 refinements: audio routing decoupling, mic reverb, per-layer summing gains, header BPM, LabeledKnob scaling, and animation fix.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":37,"issue_id":"bd-szq","author":"Bill Tribble","text":"Adding layerGains vector and updating getCompositeAudio to apply scaling.","created_at":"2026-02-20T16:13:15Z"}]}
{"id":"bd-tlq","title":"Bug: Reverb Routing & Monitor Visibility","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-21T15:14:53.470850Z","created_by":"billt","updated_at":"2026-02-21T15:17:43.918670Z","closed_at":"2026-02-21T15:17:43.918658Z","close_reason":"Implemented phase-locked alignment, centered stereo monitoring with reverb, and consolidated FX bounce workflow.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":62,"issue_id":"bd-tlq","author":"Bill Tribble","text":"### Detailed Context\nReverb is moved to the input processing stage before the monitor split. This ensures reverb is audible in real-time during performance and 'baked' into the captured audio, but kept separate from existing dry riffs.","created_at":"2026-02-21T15:15:04Z"}]}
{"id":"bd-urx","title":"Epic: Refine Riffs & Add FX Mode","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-19T22:49:21.070956Z","created_by":"billt","updated_at":"2026-02-20T11:30:28.770328Z","closed_at":"2026-02-20T11:30:28.770311Z","close_reason":"All child tasks completed: Adjustable BPM, Reverb effect, and various UI/Fix refinements.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-urx.1","title":"Make riffs loop indefinitely upon commit","description":"Currently riffs play back but only once. I want them to loop indefinitely. As soon as a loop is committed to a riff it should start playing back. Required audio engine/frontend linkage changes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T22:53:04.059776Z","created_by":"billt","updated_at":"2026-02-19T23:03:17.559670Z","closed_at":"2026-02-19T23:03:17.559653Z","close_reason":"Implemented indefinite looping for riffs on capture and selection. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.1","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.059776Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":13,"issue_id":"bd-urx.1","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'fix: some things are working now - riffs play back but only once. i want them to loop indefinitely. as soon as a loop is commited to a riff it should start playing back.'\n\n**Actionable Steps:**\n1. Update audio engine to loop playback bounds automatically upon riff commit.\n2. Ensure the state syncs properly to the frontend to highlight playback indefinitely.\n3. Verify only one riff plays at a time if they overlap.","created_at":"2026-02-19T22:57:42Z"}]}
{"id":"bd-urx.2","title":"Fix visual glitch when riffs are first added","description":"When riffs are first added they look weird like a cut off corner. Clicking the riff makes it appear clearly, but sometimes only one is visible at a time. This needs a frontend layout/rendering fix.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-19T22:53:04.088706Z","created_by":"billt","updated_at":"2026-02-20T07:15:17.555144Z","closed_at":"2026-02-20T07:15:17.555129Z","close_reason":"Fixed visual glitches in RiffHistoryPanel by improving update detection and removing problematic clipping logic. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.2","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.088706Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":14,"issue_id":"bd-urx.2","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'Visual Bug: When riffs are first added they look weird like this screengrab. I just see one cut off corner. then if i click the riff it appears clearly, but i can sometimes only see one at a time.'\n\n**Actionable Steps:**\n1. Inspect the frontend rendering logic for the Riff History layout.\n2. Fix whatever CSS bounds or mounting glitch is causing the cut-off rendering initially.\n3. Ensure all riffs display properly side-by-side or stacked without needing to be clicked.","created_at":"2026-02-19T22:57:43Z"}]}
{"id":"bd-urx.3","title":"Add adjustable BPM to header and link to riff pitch","description":"Add a BPM to the header that can be clicked and adjusted. If BPM changes, allow pitch of riff to adjust to match. This will require both UI state for BPM and audio engine time/pitch stretching adjustments.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T22:53:04.114896Z","created_by":"billt","updated_at":"2026-02-20T11:27:52.437195Z","closed_at":"2026-02-20T11:27:52.437179Z","close_reason":"Implemented adjustable BPM control with UI and logic","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.3","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.114896Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":15,"issue_id":"bd-urx.3","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'FR's: add a BPM to the header that i can clikc and adjust. if bpm changes, allow pitch of riff to adjust to match'\n\n**Actionable Steps:**\n1. Add a BPM state parameter to the header in the UI. Make it clickable to adjust.\n2. Connect this parameter to the JUCE backend audio engine.\n3. Add or hook up pitch/time-stretching logic so the loops match the master BPM seamlessly.","created_at":"2026-02-19T22:57:54Z"}]}
{"id":"bd-urx.4","title":"Add Reverb effect and adjust mic controls","description":"Create a reverb effect and add controls for it. Make the gain dial smaller to fit it all in. Move monitor button down to make space. Set gain at 14db by default. Involves JUCE Reverb integration and React UI updates.","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T22:53:04.153844Z","created_by":"billt","updated_at":"2026-02-20T11:30:06.301286Z","closed_at":"2026-02-20T11:30:06.301270Z","close_reason":"Implemented Reverb effect using juce::Reverb with Size and Mix controls in the FX tab","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.4","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.153844Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":17,"issue_id":"bd-urx.4","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'create a reverb effect and add controls for it. make the gain dial smaller to fit it all in. move monitor button down to make space. set gain at 14db by default.'\n\n**Actionable Steps:**\n1. Create a juce::Reverb parameter and processing block in the backend audio engine.\n2. Update the React UI to adjust the layout: shrink the gain dial, move the monitor button down.\n3. Set the default gain to 14dB. Add the new Reverb controls.","created_at":"2026-02-19T22:57:57Z"}]}
{"id":"bd-urx.5","title":"Move level meter to header and resize","description":"Make level meter smaller, horizontal, and put it in header. No need for flowzone title, remove it. Pure frontend UI adjustment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-19T22:53:04.186884Z","created_by":"billt","updated_at":"2026-02-20T07:20:55.382701Z","closed_at":"2026-02-20T07:20:55.382686Z","close_reason":"Relocated level meter to header, removed title, and implemented horizontal rendering mode. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.5","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.186884Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":18,"issue_id":"bd-urx.5","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'make level meter smaller, horizontal, and put it in header. no need for flowzone title, remove.'\n\n**Actionable Steps:**\n1. Edit the frontend layout to remove the FlowZone title text.\n2. Relocate the level meter up to the header area.\n3. Modify the canvas drawing of the level meter to be a small horizontal strip rather than vertical.","created_at":"2026-02-19T22:58:07Z"}]}
{"id":"bd-urx.6","title":"Add middle menu containing Mode and FX","description":"Make a menu in the middle of the screen, above retro audio display, below mic controls. In menu: Mode, FX. Mic is currently in Mode state, so show this still.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T22:53:04.211531Z","created_by":"billt","updated_at":"2026-02-20T07:19:01.819403Z","closed_at":"2026-02-20T07:19:01.819385Z","close_reason":"Implemented middle menu with Mode and FX tabs. Moved mic controls to Mode tab. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.6","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.211531Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":19,"issue_id":"bd-urx.6","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'add menu: make a menu in the middle of the screen, above retro audio display, below mic controls. in menu: Mode, FX. Mic is currently in Mode state, so show this still. i want you to use this ui image as inspiration, not a goal'\n\n**Actionable Steps:**\n1. Create a central menu component in the React UI layout.\n2. The menu should have two primary tabs: 'Mode' and 'FX'.\n3. Current mic controls should reside inside the 'Mode' tab view. Ensure visual styling draws inspiration from premium modern app aesthetics.","created_at":"2026-02-19T22:58:10Z"}]}
{"id":"bd-zgy","title":"Riffs: fix RTL layout (newest on right)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-20T12:58:28.411695Z","created_by":"billt","updated_at":"2026-02-20T13:08:09.104555Z","closed_at":"2026-02-20T13:08:09.104542Z","close_reason":"Successfully implemented and verified with build. Fixed audio glitches, RTL layout, and FX crossfading.","source_repo":".","compaction_level":0,"original_size":0}
