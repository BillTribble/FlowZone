{"id":"bd-142","title":"Phase 2: Retrospective Buffer + Waveform Display","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-19T07:44:06.578749Z","created_by":"billt","updated_at":"2026-02-19T08:37:54.449682Z","closed_at":"2026-02-19T08:37:54.449667Z","close_reason":"All dependencies closed.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-142","depends_on_id":"bd-27a","type":"blocks","created_at":"2026-02-19T07:44:19.183939Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-142","depends_on_id":"bd-2ti","type":"blocks","created_at":"2026-02-19T07:44:37.047286Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-142","depends_on_id":"bd-3pn","type":"blocks","created_at":"2026-02-19T07:44:37.068921Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-15j","title":"Retrospective Interaction: Click-to-Loop Logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","updated_at":"2026-02-19T08:23:35.053416Z","closed_at":"2026-02-19T08:23:35.053402Z","close_reason":"Implemented click detection for 4-section layout, callback triggering (mocked with logging), and visual flash feedback.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-15j","depends_on_id":"bd-26v","type":"blocks","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-15j","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:11.334788Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":5,"issue_id":"bd-15j","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- Add juce::MouseListener or override mouseDown in the retrospective panel components.\n- **Hit Testing:** Determine which of the 4 sections was clicked.\n- **Action:**\n  - Click on 1-Bar section -> Trigger SET_LOOP_LENGTH(1) -> Commits 1 bar from buffer to slot.\n  - Click on 2-Bar section -> Trigger SET_LOOP_LENGTH(2) -> Commits 2 bars.\n  - ...and so on for 4 and 8.\n- **Visual Feedback:** \n  - Momentary flash or highlight on the clicked section.\n  - Mocking: If the Engine isn't fully ready to accept SET_LOOP_LENGTH, just log the intent to console.","created_at":"2026-02-19T08:18:10Z"}]}
{"id":"bd-1cy","title":"V2 Prototype: Mic Input with Gain, Level Meter & Monitor","status":"closed","priority":0,"issue_type":"epic","created_at":"2026-02-19T07:39:33.081766Z","created_by":"billt","updated_at":"2026-02-19T07:40:28.634117Z","closed_at":"2026-02-19T07:40:28.634105Z","close_reason":"Verified by user in build","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1cy","depends_on_id":"bd-27m","type":"blocks","created_at":"2026-02-19T07:40:16.441475Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-1eo","title":"Implement Main.cpp — JUCE standalone app entry point","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.125650Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366055Z","closed_at":"2026-02-19T07:40:16.366042Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1fv","title":"Differentiate stacked riff layers visually","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-19T22:54:49.224095Z","created_by":"billt","updated_at":"2026-02-19T22:57:56.424106Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1fv","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:55:09.861841Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":16,"issue_id":"bd-1fv","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'visual fix: when i add a layer to a riff, show it as a new layer.. the riff gets denser with layers each time one is added. they stack vertically.. make each layer 30% brighter or darker, alternate zebra style to differentiate.'\n\n**Actionable Steps:**\n1. Update the Riff UI component to visibly draw multiple layers vertically stacked.\n2. Apply an alternating shading function (e.g. alternating 30% luminosity) so each stacked layer is easily visually distinct.","created_at":"2026-02-19T22:57:56Z"}]}
{"id":"bd-1hr","title":"Implement LevelMeter component — real-time VU meter with peak hold","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.146379Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366465Z","closed_at":"2026-02-19T07:40:16.366453Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1ta","title":"Fix Riff UI overlap and sizing issues in History Panel","status":"closed","priority":2,"issue_type":"bug","created_at":"2026-02-19T08:56:34.534119Z","created_by":"billt","updated_at":"2026-02-19T22:14:02.823869Z","closed_at":"2026-02-19T22:14:02.823854Z","close_reason":"Fixed UI overlaps with clipping, selection jumping with UUID tracking, and sizing issues with consistent border logic.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":11,"issue_id":"bd-1ta","author":"Bill Tribble","text":"Investigate RiffHistoryPanel::updateItems(). Ensure currentX correctly handles multiple items without overlap. User reports clips overlap in UI. Also check why user thinks size changes on click (bounds updates?). Ensure fixed width is respected.","created_at":"2026-02-19T08:56:48Z"}]}
{"id":"bd-1wy","title":"Implement exclusive Riff playback (one at a time)","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T08:57:02.911674Z","created_by":"billt","updated_at":"2026-02-19T22:14:18.963018Z","closed_at":"2026-02-19T22:14:18.962949Z","close_reason":"Implemented exclusive riff playback by clearing the playing riffs list before starting a new one.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":12,"issue_id":"bd-1wy","author":"Bill Tribble","text":"RiffPlaybackEngine::playRiff currently adds to playingRiffs. Must clear existing riffs before playing new one to ensure single-playback exclusivity.","created_at":"2026-02-19T08:57:17Z"}]}
{"id":"bd-1zg","title":"Riff History Data Model & Commit Logic","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","updated_at":"2026-02-19T08:36:56.541148Z","closed_at":"2026-02-19T08:36:56.541132Z","close_reason":"Implemented Riff data model and capture logic. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-1zg","depends_on_id":"bd-15j","type":"blocks","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-1zg","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:30.154765Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":6,"issue_id":"bd-1zg","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Data Structure:**\n  - Define struct Riff { UUID id; String name; int layers; ... }.\n  - Add std::vector<Riff> riffHistory to SessionStateManager (or MainComponent for prototype).\n- **Commit Logic:**\n  - When a loop is captured/committed (via the retrospective click), create a new Riff entry.\n  - **Limit:** Keep the vector size reasonable (e.g., unlimited for now, or max 100).\n- **Persistence:** valid Riffs should theoretically be saved to disk, but for this task, focus on the runtime std::vector structure.","created_at":"2026-02-19T08:18:12Z"},{"id":8,"issue_id":"bd-1zg","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Audio Storage:** The Riff struct/class MUST hold the actual audio data (e.g., juce::AudioBuffer float).\n- **Creation:** When a loop is captured, deep-copy that audio region into a new Riff object.\n- **Playback Readiness:** The Riff object must be ready for immediate playback.\n- **Metadata:** Store BPM, length in bars, and capture time.","created_at":"2026-02-19T08:32:50Z"}]}
{"id":"bd-26v","title":"Retrospective UI: 4-Section Layout with Variable Time Scaling","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:15:55.065140Z","created_by":"billt","updated_at":"2026-02-19T08:22:06.979271Z","closed_at":"2026-02-19T08:22:06.979251Z","close_reason":"Implemented 4-section layout with variable time scaling (1, 2, 4, 8 bars) in WaveformPanel.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-26v","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:15:55.065140Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":4,"issue_id":"bd-26v","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- Use WaveformPanel as the base class or reference.\n- The panel should be divided into 4 vertical strips of equal width.\n- Rightmost strip = 1 Bar.\n- 2nd from right = 2 Bars.\n- 3rd from right = 4 Bars.\n- Leftmost strip = 8 Bars.\n- **Squashing Logic:** All strips must show the full duration of their respective time windows. \n  - 1 Bar strip shows the last 1 bar of audio.\n  - 8 Bar strip shows the last 8 bars of audio.\n  - This means the 8 Bar strip's waveform will appear compressed (squashed) horizontally compared to the 1 Bar strip.\n  - The visual scroll speed will be different for each: 1 Bar moves fastest, 8 Bars moves slowest (1/8th speed).","created_at":"2026-02-19T08:18:09Z"}]}
{"id":"bd-27a","title":"RetrospectiveBuffer class — lock-free circular audio buffer","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:11.302833Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.098600Z","closed_at":"2026-02-19T07:51:44.098582Z","close_reason":"RetrospectiveBuffer.h/.cpp implemented. Lock-free circular ring buffer, prepare()/pushBlock()/getWaveformData(). Builds clean.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":1,"issue_id":"bd-27a","author":"Bill Tribble","text":"## Background\nPhase 2 of the V2 prototype. Mic audio is arriving via getNextAudioBlock(). We need a lock-free circular buffer that continuously captures the post-gain audio so we can retrieve it later for visualization and eventually for loop capture.\n\nReference: archive/v1/src/engine/RetrospectiveBuffer.h/.cpp — similar design, can be simplified for v2.\n\n## Implementation\n- New files: src/RetrospectiveBuffer.h, src/RetrospectiveBuffer.cpp\n- Circular buffer using juce::AudioBuffer<float> (stereo, 60s capacity)\n- prepare(double sampleRate, int maxSeconds) — allocates buffer, called from prepareToPlay\n- pushBlock(const float* const* channelData, int numChannels, int numSamples) — called from audio thread, writes to ring buffer with wrap-around. Use raw pointers (not juce::AudioBuffer ref) to avoid any allocation.\n- getWaveformData(int numOutputPoints) — called from message thread, returns std::vector<float> of downsampled peak data from the most recent N samples. Reads writeIndex atomically.\n- writeIndex is std::atomic<int> so message thread can read it safely. Single writer (audio thread), single reader (message thread) = safe without locks.\n- No allocation on audio thread. The buffer is pre-allocated in prepare().\n\n## Acceptance Criteria\n- [ ] Class compiles with no warnings\n- [ ] pushBlock called per audio callback doesn't allocate or lock\n- [ ] getWaveformData returns sensible descending-recency peak data\n- [ ] 60 seconds of audio can be stored at 44100/48000 Hz stereo","created_at":"2026-02-19T07:44:54Z"}]}
{"id":"bd-27m","title":"Build, test, and verify mic input prototype","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.187659Z","created_by":"billt","updated_at":"2026-02-19T07:40:28.632840Z","closed_at":"2026-02-19T07:40:28.632821Z","close_reason":"Verified by user in build","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-27m","depends_on_id":"bd-2hy","type":"blocks","created_at":"2026-02-19T07:40:16.417134Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-2ek","title":"Riff Instant Playback & Visual Feedback","description":"Automatically play the riff upon capture and update the UI to show playback progress/active state in the history row.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:43:39.842637Z","created_by":"billt","updated_at":"2026-02-19T08:46:29.938627Z","closed_at":"2026-02-19T08:46:29.938613Z","close_reason":"Implemented instant playback after capture and visual cyan highlighting in the history row for playing riffs.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-2ek","depends_on_id":"bd-5uh","type":"discovered-from","created_at":"2026-02-19T08:43:39.842637Z","created_by":"billt","metadata":"{}","thread_id":""}]}
{"id":"bd-2hy","title":"Implement MainComponent — mic input, gain knob, monitor toggle, audio callback","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.166512Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.366888Z","closed_at":"2026-02-19T07:40:16.366874Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2ti","title":"WaveformPanel component — scrolling horizontal waveform display","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:25.389950Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.129620Z","closed_at":"2026-02-19T07:51:44.129602Z","close_reason":"WaveformPanel.h/.cpp implemented. Scrolling waveform, 4 bar division lines, premium gradient rendering. Builds clean.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":2,"issue_id":"bd-2ti","author":"Bill Tribble","text":"## Background\nA horizontal JUCE component that displays a scrolling waveform of the retrospective buffer content. Audio flows from right to left (newest audio enters on the right, oldest audio exits on the left). The panel has 4 vertical division markers showing bar boundaries.\n\n## Implementation\n- New files: src/WaveformPanel.h, src/WaveformPanel.cpp\n- Custom juce::Component, full-width horizontal strip\n- paint() draws:\n  1. Dark background with subtle gradient (match app theme 0xFF0F0F23)\n  2. Waveform path — vertical peak lines or filled path, drawn from left (oldest) to right (newest). Color: green gradient matching the app accent (0xFF00CC66).\n  3. Four vertical division lines at positions corresponding to 1 bar, 2 bars, 4 bars, and 8 bars from the right edge. Labels above each: '1', '2', '4', '8'. Divisions measured from right edge since newest audio is on the right.\n  4. Subtle grid lines or markers for visual context.\n- setWaveformData(const std::vector<float>& data) — called from timer on message thread. Stores data and calls repaint().\n- setBPM(double bpm) and setSampleRate(double sr) — needed to calculate bar positions in pixels. Default BPM=120.\n- Bar width in samples = (60.0 / bpm) * 4.0 * sampleRate (4 beats per bar)\n- The total visible window should show 8 bars worth of audio. The getWaveformData() call should request data for exactly this duration.\n- Height: ~100-120px, premium look with anti-aliased rendering.\n\n## Acceptance Criteria\n- [ ] Component renders a horizontal waveform strip\n- [ ] Waveform scrolls right-to-left when fed updating data\n- [ ] 4 vertical divisions visible at 1/2/4/8 bar positions from right\n- [ ] Division positions update correctly if BPM changes\n- [ ] Looks premium — dark background, gradient waveform, anti-aliased lines","created_at":"2026-02-19T07:45:12Z"}]}
{"id":"bd-3li","title":"Fix silent Riff playback: audio routing issue with Monitor OFF","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-19T08:56:09.193004Z","created_by":"billt","updated_at":"2026-02-19T22:12:27.689798Z","closed_at":"2026-02-19T22:12:27.689774Z","close_reason":"Cleared input buffer before mixing riffs if monitor is off.","source_repo":".","compaction_level":0,"original_size":0,"comments":[{"id":10,"issue_id":"bd-3li","author":"Bill Tribble","text":"When Monitor is OFF, bufferToFill.clearActiveBufferRegion() is called AFTER riffEngine.processNextBlock(*buffer), silencing riffs too. Fix: Clear input buffer BEFORE mixing riffs.","created_at":"2026-02-19T08:56:19Z"}]}
{"id":"bd-3pn","title":"Integration — wire buffer + panel into MainComponent and update spec","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:44:30.450172Z","created_by":"billt","updated_at":"2026-02-19T07:51:44.155717Z","closed_at":"2026-02-19T07:51:44.155702Z","close_reason":"Wired into MainComponent: prepareToPlay allocates buffer, getNextAudioBlock pushes, timerCallback feeds panel. Window height 750. CMakeLists updated. Build succeeded.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-3pn","depends_on_id":"bd-27a","type":"blocks","created_at":"2026-02-19T07:44:37.091938Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-3pn","depends_on_id":"bd-2ti","type":"blocks","created_at":"2026-02-19T07:44:37.113170Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":3,"issue_id":"bd-3pn","author":"Bill Tribble","text":"## Background\nFinal integration task. Wire the RetrospectiveBuffer and WaveformPanel into MainComponent so the whole pipeline works end-to-end: mic → gain → peak metering → retrospective buffer → waveform display.\n\n## Implementation\n\n### MainComponent.h changes:\n- #include RetrospectiveBuffer.h and WaveformPanel.h\n- Add members: RetrospectiveBuffer retroBuffer; WaveformPanel waveformPanel;\n- Add member: double currentSampleRate = 0.0;\n\n### MainComponent.cpp changes:\n\n1. Constructor:\n   - addAndMakeVisible(waveformPanel)\n   - waveformPanel.setBPM(120.0) (hardcoded for now)\n   - Increase window height from 600 to ~750 to accommodate waveform panel\n\n2. prepareToPlay():\n   - retroBuffer.prepare(sampleRate, 60) — 60 seconds storage\n   - waveformPanel.setSampleRate(sampleRate)\n   - Store currentSampleRate = sampleRate\n\n3. getNextAudioBlock():\n   - After gain is applied and peak is computed, call retroBuffer.pushBlock(channelData, numChannels, numSamples)\n   - This must happen BEFORE the monitor check clears the buffer\n\n4. timerCallback():\n   - Calculate 8 bars in samples: int eightBars = (int)((60.0/120.0) * 4.0 * 8.0 * currentSampleRate)\n   - auto waveform = retroBuffer.getWaveformData(eightBars, panelWidthInPixels)\n   - waveformPanel.setWaveformData(waveform)\n\n5. resized():\n   - Add waveformPanel below the existing content\n   - Full width, ~120px height at bottom\n   - Adjust existing layout to make room\n\n### Spec update:\n- Update Spec_FlowZone_V2_Prototype.md to reflect Phase 2 features\n- Move retrospective buffer from Non-Goals to current scope\n- Update architecture diagram and signal flow\n- Update file structure section\n\n### Build:\n- Add new .h/.cpp files to CMakeLists.txt / Projucer\n- Build with xcodebuild, verify no warnings\n\n## Acceptance Criteria\n- [ ] App launches and shows waveform panel below existing mic controls\n- [ ] Speaking/playing into mic shows waveform flowing right-to-left\n- [ ] 4 bar division lines visible and correctly positioned at 120 BPM\n- [ ] Level meter still works correctly\n- [ ] Gain knob still affects waveform amplitude\n- [ ] Monitor toggle still works\n- [ ] No audio glitches, no allocation on audio thread\n- [ ] Spec updated to reflect Phase 2\n- [ ] Builds clean with no warnings\n- [ ] Git committed and pushed","created_at":"2026-02-19T07:45:33Z"}]}
{"id":"bd-5uh","title":"Implement Riff Layering (Merge Logic)","description":"Add logic to sum newly captured audio into the current riff (up to 8 layers) instead of always creating a new riff entry.","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:43:32.569425Z","created_by":"billt","updated_at":"2026-02-19T08:46:29.908052Z","closed_at":"2026-02-19T08:46:29.908036Z","close_reason":"Implemented riff merging logic and layer count tracking.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-862","title":"Implement Riff Playback Engine","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:30:18.362096Z","created_by":"billt","updated_at":"2026-02-19T08:41:25.255939Z","closed_at":"2026-02-19T08:41:25.255916Z","close_reason":"Implemented RiffPlaybackEngine and integrated it into MainComponent. Wired history selection to playback. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-862","depends_on_id":"bd-1zg","type":"blocks","created_at":"2026-02-19T08:32:52.768988Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-862","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:32:51.097794Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":9,"issue_id":"bd-862","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Engine:** Create a RiffPlaybackEngine class that mixes active riffs into the main audio output.\n- **Triggering:** Provide a method `playRiff(Riff* riff)` or similar.\n- **Mixing:** Sum the audio from active riffs with the dry/monitor signal.\n- **Simple Implementation:** For now, just a \"fire and forget\" one-shot playback of the riff is sufficient to correct functionality. Looping logic can come later.","created_at":"2026-02-19T08:32:54Z"}]}
{"id":"bd-dy9","title":"Create CMake config with minimal JUCE modules","status":"closed","priority":0,"issue_type":"task","created_at":"2026-02-19T07:39:33.105834Z","created_by":"billt","updated_at":"2026-02-19T07:40:16.365528Z","closed_at":"2026-02-19T07:40:16.365510Z","close_reason":"Completed in previous worktree","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-k63","title":"Implement FX mode with Delay effect and XY controller","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-19T22:54:58.727578Z","created_by":"billt","updated_at":"2026-02-19T22:58:11.483056Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-k63","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:55:10.945250Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":20,"issue_id":"bd-k63","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'Add FX mode: when user goes to FX mode, route output audio to the FX. Add one effect to test - a delay. build an xy controller for it in lower half of screen beneath riffs view (move everything up to fit). i want you to use this ui image as inspiration, not a goal'\n\n**Actionable Steps:**\n1. Connect the 'FX' tab in the new menu to route audio into an FX bus in JUCE.\n2. Add a basic Delay effect to test the route.\n3. Build an XY touch controller in the lower half of the React UI (below the riffs view). You may need to translate/scale the canvas and upper components up to fit it.","created_at":"2026-02-19T22:58:11Z"}]}
{"id":"bd-l9z","title":"Riff History UI & Load Interaction","status":"closed","priority":1,"issue_type":"task","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","updated_at":"2026-02-19T08:39:57.229007Z","closed_at":"2026-02-19T08:39:57.228992Z","close_reason":"Implemented RiffHistoryPanel UI and integrated it into MainComponent. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-l9z","depends_on_id":"bd-1zg","type":"blocks","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","metadata":"{}","thread_id":""},{"issue_id":"bd-l9z","depends_on_id":"bd-mnk","type":"parent-child","created_at":"2026-02-19T08:16:43.570514Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":7,"issue_id":"bd-l9z","author":"Bill Tribble","text":"IMPLEMENTATION DETAILS:\n- **Visual Flow:** The Riff History row must appear BELOW the main Retrospective Looper.\n- **Direction:** Items (riffs) flow from RIGHT to LEFT, matching the retrospective waveform direction. Newest riffs appear on the right.\n- **Interaction:**\n  - Clicking a Riff in the history should trigger it (or toggle its mute state, depending on final design, but for now just visual confirmation of selection).\n- **Rendering:**\n  - Each riff should show a mini-waveform or distinct color block.\n  - Must look distinct from the main retrospective looper.","created_at":"2026-02-19T08:30:20Z"}]}
{"id":"bd-mnk","title":"Implement Retrospective Interactions & Riff History","status":"closed","priority":1,"issue_type":"epic","created_at":"2026-02-19T08:14:52.659368Z","created_by":"billt","updated_at":"2026-02-19T08:41:38.563012Z","closed_at":"2026-02-19T08:41:38.562997Z","close_reason":"All child tasks completed: Retrospective UI, Click-to-Loop logic, Riff Data Model, Riff History UI, and Playback Engine.","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-urx","title":"Epic: Refine Riffs & Add FX Mode","status":"open","priority":1,"issue_type":"epic","created_at":"2026-02-19T22:49:21.070956Z","created_by":"billt","updated_at":"2026-02-19T22:49:21.070956Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-urx.1","title":"Make riffs loop indefinitely upon commit","description":"Currently riffs play back but only once. I want them to loop indefinitely. As soon as a loop is committed to a riff it should start playing back. Required audio engine/frontend linkage changes.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T22:53:04.059776Z","created_by":"billt","updated_at":"2026-02-19T23:03:17.559670Z","closed_at":"2026-02-19T23:03:17.559653Z","close_reason":"Implemented indefinite looping for riffs on capture and selection. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.1","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.059776Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":13,"issue_id":"bd-urx.1","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'fix: some things are working now - riffs play back but only once. i want them to loop indefinitely. as soon as a loop is commited to a riff it should start playing back.'\n\n**Actionable Steps:**\n1. Update audio engine to loop playback bounds automatically upon riff commit.\n2. Ensure the state syncs properly to the frontend to highlight playback indefinitely.\n3. Verify only one riff plays at a time if they overlap.","created_at":"2026-02-19T22:57:42Z"}]}
{"id":"bd-urx.2","title":"Fix visual glitch when riffs are first added","description":"When riffs are first added they look weird like a cut off corner. Clicking the riff makes it appear clearly, but sometimes only one is visible at a time. This needs a frontend layout/rendering fix.","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-19T22:53:04.088706Z","created_by":"billt","updated_at":"2026-02-20T07:15:17.555144Z","closed_at":"2026-02-20T07:15:17.555129Z","close_reason":"Fixed visual glitches in RiffHistoryPanel by improving update detection and removing problematic clipping logic. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.2","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.088706Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":14,"issue_id":"bd-urx.2","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'Visual Bug: When riffs are first added they look weird like this screengrab. I just see one cut off corner. then if i click the riff it appears clearly, but i can sometimes only see one at a time.'\n\n**Actionable Steps:**\n1. Inspect the frontend rendering logic for the Riff History layout.\n2. Fix whatever CSS bounds or mounting glitch is causing the cut-off rendering initially.\n3. Ensure all riffs display properly side-by-side or stacked without needing to be clicked.","created_at":"2026-02-19T22:57:43Z"}]}
{"id":"bd-urx.3","title":"Add adjustable BPM to header and link to riff pitch","description":"Add a BPM to the header that can be clicked and adjusted. If BPM changes, allow pitch of riff to adjust to match. This will require both UI state for BPM and audio engine time/pitch stretching adjustments.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-19T22:53:04.114896Z","created_by":"billt","updated_at":"2026-02-19T22:57:54.345883Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.3","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.114896Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":15,"issue_id":"bd-urx.3","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'FR's: add a BPM to the header that i can clikc and adjust. if bpm changes, allow pitch of riff to adjust to match'\n\n**Actionable Steps:**\n1. Add a BPM state parameter to the header in the UI. Make it clickable to adjust.\n2. Connect this parameter to the JUCE backend audio engine.\n3. Add or hook up pitch/time-stretching logic so the loops match the master BPM seamlessly.","created_at":"2026-02-19T22:57:54Z"}]}
{"id":"bd-urx.4","title":"Add Reverb effect and adjust mic controls","description":"Create a reverb effect and add controls for it. Make the gain dial smaller to fit it all in. Move monitor button down to make space. Set gain at 14db by default. Involves JUCE Reverb integration and React UI updates.","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-19T22:53:04.153844Z","created_by":"billt","updated_at":"2026-02-19T22:57:57.752479Z","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.4","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.153844Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":17,"issue_id":"bd-urx.4","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'create a reverb effect and add controls for it. make the gain dial smaller to fit it all in. move monitor button down to make space. set gain at 14db by default.'\n\n**Actionable Steps:**\n1. Create a juce::Reverb parameter and processing block in the backend audio engine.\n2. Update the React UI to adjust the layout: shrink the gain dial, move the monitor button down.\n3. Set the default gain to 14dB. Add the new Reverb controls.","created_at":"2026-02-19T22:57:57Z"}]}
{"id":"bd-urx.5","title":"Move level meter to header and resize","description":"Make level meter smaller, horizontal, and put it in header. No need for flowzone title, remove it. Pure frontend UI adjustment.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-19T22:53:04.186884Z","created_by":"billt","updated_at":"2026-02-20T07:20:55.382701Z","closed_at":"2026-02-20T07:20:55.382686Z","close_reason":"Relocated level meter to header, removed title, and implemented horizontal rendering mode. Verified with build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.5","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.186884Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":18,"issue_id":"bd-urx.5","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'make level meter smaller, horizontal, and put it in header. no need for flowzone title, remove.'\n\n**Actionable Steps:**\n1. Edit the frontend layout to remove the FlowZone title text.\n2. Relocate the level meter up to the header area.\n3. Modify the canvas drawing of the level meter to be a small horizontal strip rather than vertical.","created_at":"2026-02-19T22:58:07Z"}]}
{"id":"bd-urx.6","title":"Add middle menu containing Mode and FX","description":"Make a menu in the middle of the screen, above retro audio display, below mic controls. In menu: Mode, FX. Mic is currently in Mode state, so show this still.","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T22:53:04.211531Z","created_by":"billt","updated_at":"2026-02-20T07:19:01.819403Z","closed_at":"2026-02-20T07:19:01.819385Z","close_reason":"Implemented middle menu with Mode and FX tabs. Moved mic controls to Mode tab. Verified with successful build.","source_repo":".","compaction_level":0,"original_size":0,"dependencies":[{"issue_id":"bd-urx.6","depends_on_id":"bd-urx","type":"parent-child","created_at":"2026-02-19T22:53:04.211531Z","created_by":"billt","metadata":"{}","thread_id":""}],"comments":[{"id":19,"issue_id":"bd-urx.6","author":"Bill Tribble","text":"### Detailed Context\nThe user noted: 'add menu: make a menu in the middle of the screen, above retro audio display, below mic controls. in menu: Mode, FX. Mic is currently in Mode state, so show this still. i want you to use this ui image as inspiration, not a goal'\n\n**Actionable Steps:**\n1. Create a central menu component in the React UI layout.\n2. The menu should have two primary tabs: 'Mode' and 'FX'.\n3. Current mic controls should reside inside the 'Mode' tab view. Ensure visual styling draws inspiration from premium modern app aesthetics.","created_at":"2026-02-19T22:58:10Z"}]}
